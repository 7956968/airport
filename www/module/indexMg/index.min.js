(function(){var e=utility.getLocalStorage("language"),s=utility.getLocalStorage("userInfo"),t=utility.getLocalStorage("userFuncList");new Vue({el:"#js-vue",data:{userInfo:s,language:e?e.language:"CN",title:{CN:"深圳市民贵科技有限公司",EN:"Mingui Non-Powered Euipment Management System",TW:"民貴無動力管理系統"},tabList:[],iframeList:[],userFuncList:t,innerWidth:window.innerWidth,isModalLoading:!1,isModifyPass:!1,oldPass:"",newPass:"",modifyInfo:{oldUserPwd:"",newUserPwd:""}},methods:{logout:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.userService+"?action="+CONFIG.ACTION.userLogout,actionUrl:CONFIG.SERVICE.userService,successCallback:function(s){200==s.code?(utility.setLocalStorage("userInfo",null),utility.setLocalStorage("userFuncList",null),setTimeout(function(){window.location.href="/airport/www/indexMg.html"},150)):e.$Message.error(s.message)}})},modifyPassAction:function(){var e=this,s=$("body").find("#oldPass input").val(),t=$("body").find("#newPass input").val();utility.checkLen($.trim(s),0)?e.$Message.error("旧密码不能为空"):utility.checkLen($.trim(t),0)?e.$Message.error("新密码不能为空"):$.trim(s)!=$.trim(t)?utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.userService+"?action="+CONFIG.ACTION.changeUserPwd,actionUrl:CONFIG.SERVICE.userService,dataObj:{oldUserPwd:md5(s).toUpperCase(),newUserPwd:md5(t).toUpperCase()},successCallback:function(s){200==s.code||e.$Message.error(s.message)}}):e.$Message.error("旧密码不能与新密码一样")},showModifyPass:function(){var e=$("body").find("#js-modifyPass");e.hasClass("isShow")?(e.removeClass("isShow"),e.hide()):(e.addClass("isShow"),e.show())},isDuplicate:function(e,s){for(var t=this,i=!1,a=0,o=t[e].length;a<o;a++)if(t[e][a].id==s){i=!0;break}return i},switchStatu:function(e){$("body").find("iframe").css({zIndex:-100,opacity:0}),$("body").find("#iframe_"+e).addClass("show").css({zIndex:1e4,opacity:1}),$("body").find(".tabItem").removeClass("active"),setTimeout(function(){$("body").find("#tab_"+e).show().addClass("active show")},50)},setTabItem:function(e,s){var t=this;t.isDuplicate("tabList",s)||t.tabList.push({id:s,html:'<p class="item">'+$("#nav_"+s).html()+'</p><span class="close"><i>X</i></span>'}),t.isDuplicate("iframeList",s)||t.iframeList.push({id:s,src:e}),t.switchStatu(s)},switchTab:function(e,s){var t=this,i=s.target;$(i).hasClass("close")||"X"==$(i).text()?t.closeTab(e):t.switchStatu(e)},closeTab:function(e){for(var s="",t=0,i=$("body").find(".tabItem").length;t<i;t++)$($("body").find(".tabItem")[t]).hasClass("active")&&(s=$($("body").find(".tabItem")[t]).attr("id").split("_")[1]);$("body").find("iframe").css({zIndex:-100,opacity:0}),$("body").find("#tab_"+e).hasClass("active")?($("body").find("#tab_"+e).removeClass("show active").hide().prevAll(".show").last().addClass("active"),$("body").find("#iframe_"+e).removeClass("show").prevAll(".show").last().css({zIndex:1e4,opacity:1})):($("body").find("#tab_"+e).removeClass("show active").hide(),$("body").find("#tab_"+s).addClass("show active"),$("body").find("#iframe_"+e).removeClass("show"),$("body").find("#iframe_"+s).addClass("show").css({zIndex:1e4,opacity:1}))}},created:function(){var e=this;document.title=e.title[e.language],utility.isLogin(!0)}})})();