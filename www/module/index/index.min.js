(function(){var e=utility.getLocalStorage("language"),i=utility.getLocalStorage("userInfo"),t=utility.getLocalStorage("userFuncList");new Vue({el:"#js-vue",data:{userInfo:i,language:e?e.language:"CN",title:{CN:"航空地面服务特种车辆管理系统",EN:"Mingui Non-Powered Euipment Management System",TW:"民貴無動力管理系統"},tabList:{Welcom:null,Maps:null,OrganizeManage:null,DepartmentManage:null,UserManage:null,DepartUser:null,RoleManage:null,DataGroup:null,VehicleManage:null,VehicleMaintenance:null,TerminalManage:null,SectorsManage:null,VideoCamera:null,Alarm:null,OnlineDetail:null,UsageStatistics:null,TerminalUse:null,ViolationStatistics:null,OperationSituation:null,Mileage:null,InsideTheFence:null,SystemLog:null,MessageList:null,TerminalParame:null,BaiduMap:null},iframeList:{Welcom:null,Maps:null,OrganizeManage:null,DepartmentManage:null,UserManage:null,DepartUser:null,RoleManage:null,DataGroup:null,VehicleManage:null,VehicleMaintenance:null,TerminalManage:null,SectorsManage:null,VideoCamera:null,Alarm:null,OnlineDetail:null,UsageStatistics:null,TerminalUse:null,ViolationStatistics:null,OperationSituation:null,Mileage:null,InsideTheFence:null,SystemLog:null,MessageList:null,TerminalParame:null,BaiduMap:null},userFuncList:t,innerWidth:window.innerWidth,isModalLoading:!1,isModifyPass:!1,oldPass:"",newPass:"",modifyInfo:{oldUserPwd:"",newUserPwd:""}},methods:{logout:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.userService+"?action="+CONFIG.ACTION.userLogout,actionUrl:CONFIG.SERVICE.userService,successCallback:function(i){200==i.code?(utility.setLocalStorage("userInfo",null),utility.setLocalStorage("userFuncList",null),setTimeout(function(){window.location.href="/airport/www/login.html"},150)):e.$Message.error(i.message)}})},modifyPassAction:function(){var e=this,i=$("body").find("#oldPass input").val(),t=$("body").find("#newPass input").val();utility.checkLen($.trim(i),0)?e.$Message.error("旧密码不能为空"):utility.checkLen($.trim(t),0)?e.$Message.error("新密码不能为空"):$.trim(i)!=$.trim(t)?utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.userService+"?action="+CONFIG.ACTION.changeUserPwd,actionUrl:CONFIG.SERVICE.userService,dataObj:{oldUserPwd:md5(i).toUpperCase(),newUserPwd:md5(t).toUpperCase()},successCallback:function(i){200!=i.code&&e.$Message.error(i.message)}}):e.$Message.error("旧密码不能与新密码一样")},showModifyPass:function(){var e=$("body").find("#js-modifyPass");e.hasClass("isShow")?(e.removeClass("isShow"),e.hide()):(e.addClass("isShow"),e.show())},isDuplicate:function(e,i,t){var a=this;for(var l in a[e])a[e].hasOwnProperty(l)&&a[e][l]&&(a[e][l][i]=t)},switchStatu:function(e){var i=this;i.isDuplicate("tabList","isActive",!1),i.isDuplicate("iframeList","isActive",!1),setTimeout(function(){i.tabList[e].isActive=!0,i.iframeList[e].isActive=!0},200)},setTabItem:function(e,i){var t=this;t.isDuplicate("tabList","isActive",!1),t.isDuplicate("iframeList","isActive",!1),t.tabList[i]={isDelete:!1,isActive:!0,html:'<p class="item">'+$("#nav_"+i).html()+"</p>"+("Welcom"!=i?'<span class="close"><i>X</i></span>':"")},t.iframeList[i]={src:e+"?v="+Date.parse(new Date),isActive:!0,isDelete:!1}},switchTab:function(e,i){var t=this,a=i.target;$(a).hasClass("close")||"X"==$(a).text()?t.closeTab(e):t.switchStatu(e)},closeTab:function(e){var i=this,t=$("body").find("#tab_"+e).prev().attr("id").split("_")[1];$("body").find("#tab_"+e).hasClass("active")?(i.tabList[e].isDelete=!0,i.iframeList[e].isDelete=!0,i.tabList[t].isActive=!0,i.iframeList[t].isActive=!0):(i.tabList[e].isDelete=!0,i.iframeList[e].isDelete=!0)},getBizParam:function(){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.commonService+"?action="+CONFIG.ACTION.getBizParam,actionUrl:CONFIG.SERVICE.commonService,successCallback:function(e){200==e.code&&utility.setLocalStorage("bizParam",e.data)}})}},created:function(){var e=this;document.title=e.title[e.language],utility.isLogin(!0),e.getBizParam(),setTimeout(function(){e.setTabItem("/airport/www/module/welcom/welcom.html","Welcom")},1e3),setInterval(function(){e.getBizParam()},6e4)},mounted:function(){}})})();