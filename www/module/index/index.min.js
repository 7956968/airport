(function(){var a=utility.getLocalStorage("language"),b=utility.getLocalStorage("userInfo"),c=utility.getLocalStorage("userFuncList"),d=new Vue({el:"#js-vue",data:{userInfo:b,language:a?a.language:"CN",title:{CN:"\u7279\u79CD\u8F66\u8F86\u97F3\u89C6\u9891\u53EF\u89C6\u5316\u7CFB\u7EDF",EN:"Mingui Non-Powered Euipment Management System",TW:"\u6C11\u8CB4\u7121\u52D5\u529B\u7BA1\u7406\u7CFB\u7D71"},tabList:{Welcom:null,Maps:null,OrganizeManage:null,DepartmentManage:null,UserManage:null,DepartUser:null,RoleManage:null,DataGroup:null,VehicleManage:null,VehicleMaintenance:null,TerminalManage:null,SectorsManage:null,VideoCamera:null,Alarm:null,OnlineDetail:null,UsageStatistics:null,TerminalUse:null,ViolationStatistics:null,OperationSituation:null,Mileage:null,InsideTheFence:null,SystemLog:null,MessageList:null,TerminalParame:null,BaiduMap:null},iframeList:{Welcom:null,Maps:null,OrganizeManage:null,DepartmentManage:null,UserManage:null,DepartUser:null,RoleManage:null,DataGroup:null,VehicleManage:null,VehicleMaintenance:null,TerminalManage:null,SectorsManage:null,VideoCamera:null,Alarm:null,OnlineDetail:null,UsageStatistics:null,TerminalUse:null,ViolationStatistics:null,OperationSituation:null,Mileage:null,InsideTheFence:null,SystemLog:null,MessageList:null,TerminalParame:null,BaiduMap:null},userFuncList:c,innerWidth:window.innerWidth,isModalLoading:!1,isModifyPass:!1,oldPass:"",newPass:"",modifyInfo:{oldUserPwd:"",newUserPwd:""}},methods:{logout:function(){var a=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.userService+"?action="+CONFIG.ACTION.userLogout,actionUrl:CONFIG.SERVICE.userService,successCallback:function(b){200==b.code?(utility.setLocalStorage("userInfo",null),utility.setLocalStorage("userFuncList",null),setTimeout(function(){window.location.href="/airport/www/login.html"},150)):a.$Message.error(b.message)}})},modifyPassAction:function(){var a=this,b=$("body").find("#oldPass input").val(),c=$("body").find("#newPass input").val();return utility.checkLen($.trim(b),0)?void a.$Message.error("\u65E7\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"):utility.checkLen($.trim(c),0)?void a.$Message.error("\u65B0\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"):$.trim(b)==$.trim(c)?void a.$Message.error("\u65E7\u5BC6\u7801\u4E0D\u80FD\u4E0E\u65B0\u5BC6\u7801\u4E00\u6837"):void utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.userService+"?action="+CONFIG.ACTION.changeUserPwd,actionUrl:CONFIG.SERVICE.userService,dataObj:{oldUserPwd:md5(b).toUpperCase(),newUserPwd:md5(c).toUpperCase()},successCallback:function(b){200!=b.code&&a.$Message.error(b.message)}})},showModifyPass:function(){var a=this,b=$("body").find("#js-modifyPass");b.hasClass("isShow")?(b.removeClass("isShow"),b.hide()):(b.addClass("isShow"),b.show())},isDuplicate:function(a,b,c){var d=this;for(var e in d[a])d[a].hasOwnProperty(e)&&(!d[a][e]||(d[a][e][b]=c))},switchStatu:function(a){var b=this;b.isDuplicate("tabList","isActive",!1),b.isDuplicate("iframeList","isActive",!1),setTimeout(function(){b.tabList[a].isActive=!0,b.iframeList[a].isActive=!0},200)},setTabItem:function(a,b){var c=this;c.isDuplicate("tabList","isActive",!1),c.isDuplicate("iframeList","isActive",!1),c.tabList[b]={isDelete:!1,isActive:!0,html:"<p class=\"item\">"+$("#nav_"+b).html()+"</p>"+("Welcom"==b?"":"<span class=\"close\"><i>X</i></span>")},c.iframeList[b]={src:a+"?v="+Date.parse(new Date),isActive:!0,isDelete:!1}},switchTab:function(a,b){var c=this,d=b.target;$(d).hasClass("close")||"X"==$(d).text()?c.closeTab(a):c.switchStatu(a)},closeTab:function(a){var b=this,c=$("body").find("#tab_"+a).prev().attr("id").split("_")[1];$("body").find("#tab_"+a).hasClass("active")?(b.tabList[a].isDelete=!0,b.iframeList[a].isDelete=!0,b.tabList[c].isActive=!0,b.iframeList[c].isActive=!0):(b.tabList[a].isDelete=!0,b.iframeList[a].isDelete=!0)}},created:function(){var a=this;document.title=a.title[a.language],utility.isLogin(!0),setTimeout(function(){a.setTabItem("/airport/www/module/welcom/welcom.html","Welcom")},1e3)},mounted:function(){this}})})();