(function(){var e=utility.getLocalStorage("language"),a=utility.getLocalStorage("userInfo"),i=utility.getLocalStorage("userFuncList");new Vue({el:"#js-vue",data:{userInfo:a,language:e?e.language:"CN",title:"特种车辆音视频可视化系统",tabList:{Welcom:null,Maps:null,OrganizeManage:null,DepartmentManage:null,UserManage:null,DepartUser:null,RoleManage:null,DataGroup:null,VehicleManage:null,VehicleMaintenance:null,TerminalManage:null,SectorsManage:null,VideoCamera:null,Alarm:null,OnlineDetail:null,UsageStatistics:null,TerminalUse:null,ViolationStatistics:null,OperationSituation:null,Mileage:null,InsideTheFence:null,SystemLog:null,MessageList:null,TerminalParame:null,BaiduMap:null,DataGroupType:null,DeviceTypeManage:null,DeviceBrandManage:null,TrafficManage:null},iframeList:{Welcom:null,Maps:null,OrganizeManage:null,DepartmentManage:null,UserManage:null,DepartUser:null,RoleManage:null,DataGroup:null,VehicleManage:null,VehicleMaintenance:null,TerminalManage:null,SectorsManage:null,VideoCamera:null,Alarm:null,OnlineDetail:null,UsageStatistics:null,TerminalUse:null,ViolationStatistics:null,OperationSituation:null,Mileage:null,InsideTheFence:null,SystemLog:null,MessageList:null,TerminalParame:null,BaiduMap:null,DataGroupType:null,DeviceTypeManage:null,DeviceBrandManage:null,TrafficManage:null},userFuncList:i,innerWidth:window.innerWidth,isModalLoading:!1,isModifyPass:!1,oldPass:"",newPass:"",modifyInfo:{oldUserPwd:"",newUserPwd:""}},methods:{logout:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.userService+"?action="+CONFIG.ACTION.userLogout,actionUrl:CONFIG.SERVICE.userService,successCallback:function(a){200==a.code?(utility.setLocalStorage("userInfo",null),utility.setLocalStorage("userFuncList",null),setTimeout(function(){window.location.href="/airport/www/login.html"},150)):e.$Message.error(a.message)}})},modifyPassAction:function(){var e=this,a=$("body").find("#oldPass input").val(),i=$("body").find("#newPass input").val();utility.checkLen($.trim(a),0)?e.$Message.error("旧密码不能为空"):utility.checkLen($.trim(i),0)?e.$Message.error("新密码不能为空"):$.trim(a)!=$.trim(i)?utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.userService+"?action="+CONFIG.ACTION.changeUserPwd,actionUrl:CONFIG.SERVICE.userService,dataObj:{oldUserPwd:md5(a).toUpperCase(),newUserPwd:md5(i).toUpperCase()},successCallback:function(a){200!=a.code&&e.$Message.error(a.message)}}):e.$Message.error("旧密码不能与新密码一样")},showModifyPass:function(){var e=$("body").find("#js-modifyPass");e.hasClass("isShow")?(e.removeClass("isShow"),e.hide()):(e.addClass("isShow"),e.show())},isDuplicate:function(e,a,i){var t=this;for(var l in t[e])t[e].hasOwnProperty(l)&&t[e][l]&&(t[e][l][a]=i)},switchStatu:function(e){var a=this;a.isDuplicate("tabList","isActive",!1),a.isDuplicate("iframeList","isActive",!1),setTimeout(function(){a.tabList[e].isActive=!0,a.iframeList[e].isActive=!0},200)},setTabItem:function(e,a){var i=this;i.isDuplicate("tabList","isActive",!1),i.isDuplicate("iframeList","isActive",!1),i.tabList[a]={isDelete:!1,isActive:!0,html:'<p class="item">'+$("#nav_"+a).html()+"</p>"+("Welcom"!=a?'<span class="close"><i>X</i></span>':"")},i.iframeList[a]={src:e+"?v="+Date.parse(new Date),isActive:!0,isDelete:!1}},switchTab:function(e,a){var i=this,t=a.target;$(t).hasClass("close")||"X"==$(t).text()?i.closeTab(e):i.switchStatu(e)},closeTab:function(e){var a=this,i=$("body").find("#tab_"+e).prev().attr("id").split("_")[1];utility.setSessionStorage("fromMap",null),$("body").find("#tab_"+e).hasClass("active")?(a.tabList[e].isDelete=!0,a.iframeList[e].isDelete=!0,a.tabList[i].isActive=!0,a.iframeList[i].isActive=!0):(a.tabList[e].isDelete=!0,a.iframeList[e].isDelete=!0)},getBizParam:function(){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.commonService+"?action="+CONFIG.ACTION.getBizParam,actionUrl:CONFIG.SERVICE.commonService,successCallback:function(e){200==e.code&&utility.setLocalStorage("bizParam",e.data)}})}},created:function(){var e=this;utility.isLogin(!0),e.getBizParam(),setTimeout(function(){e.setTabItem("/airport/www/module/welcom/welcom.html","Welcom")},1e3),setInterval(function(){e.getBizParam()},6e4)},mounted:function(){}})})();