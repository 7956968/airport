(function(){var e=utility.getLocalStorage("language"),a=utility.getLocalStorage("userInfo"),n=utility.getLocalStorage("bizParam"),t=new Vue({el:"#js-vue",data:{deleteLoading:!1,addLoading:!1,language:e?e.language:"CN",companyList:[],mapContainer:{map:null,viewInfo:{view:null,zoom:null,center:null,rotation:null},layersInfo:{layer:null,airportPoint:null,airportLine:null,airportPolygo:null,seat:null,defens:null,vehicle:null,alarm:null,camera:null,GPS:null},sourceInfo:{seat:null,defens:null,vehicle:null,alarm:null,camera:null},controlsInfo:{mousePosition:null,scaleLine:null,overviewMap:null,fullScreen:null},interactionInfo:{defens:null},featrueInfo:{clickName:null,clickId:null,clickPos:[]},geolocationInfo:{GPS:null},overlayInfo:{camera:null,defens:null},geometryInfo:{}},modal:{isVehicle:!1,isHistory:!1,isDefense:!1,isCamera:!1,isLayer:!1,isAlarm:!1,isSearch:!1},layerControl:["seat","alarm","vehicle","defens","camera"],vehiclePageInfo:{count:0,pageSize:15,pageNum:0,deptId:"",id:"",vehicleName:"",vehicleCode:"",gpsDeviceCode:""},vehicleItem:null,vehicleList:[],terminalStatusList:n.terminalStatus,vehicleColumns:[{title:{CN:"编号",EN:"Number",TW:"編號"}[e.language],key:"number"},{title:{CN:"车牌号",EN:"License Plate",TW:"車牌號"}[e.language],key:"plate"},{title:{CN:"状态",EN:"State",TW:"狀態"}[e.language],key:"state"}],vehicleDatas:[],historyColumns:[],historyDatas:[],isAddDefensAction:!1,isAddDefensDetailInfo:!1,isDrawDefening:!1,isDeleteDefens:!1,secureAreaStatusList:n.secureAreaStatus,defensAreaDetailInfo:{id:"",featureId:"",opType:1,companyId:"",deptId:"",areaName:"",areaCode:"",secureStatus:"",areaRangeStr:"",speedLimit:"",staySecond:"",remark:"",createUserId:a.id,modifyUserId:a.id},defensColumns:[{title:{CN:"名称",EN:"Name",TW:"名稱"}[e.language],key:"areaName"},{title:{CN:"编码",EN:"Code",TW:"編碼"}[e.language],key:"areaCode"},{title:{CN:"状态",EN:"Status",TW:"狀態"}[e.language],key:"secureStatus"},{title:{CN:"速度上限",EN:"Speed Limit",TW:"速度上限"}[e.language],key:"speedLimit"},{title:{CN:"停留时长",EN:"Length Of Stay",TW:"停留時長"}[e.language],key:"staySecond"},{title:{CN:"操作",EN:"Operation",TW:"操作"}[e.language],key:"operation",width:80,render:function(a,n){return a("div",[a("Button",{props:{type:"error",size:"small"},on:{click:function(){t.selectDefensArea(n)}}},{CN:"删除",EN:"Delete",TW:"删除"}[e.language])])}}],defensDatas:[],defensList:[],defensPageInfo:{id:"",count:0,pageNum:0,pageSize:15,areaName:"",companyId:"",secureStatus:""},isAddCameraAction:!1,isAddcameraDetailInfo:!1,isDeleteCamera:!1,cameraColumns:[{title:{CN:"名称",EN:"Name",TW:"名稱"}[e.language],key:"name",fixed:"left",width:100},{title:{CN:"描述",EN:"Describe",TW:"描述"}[e.language],key:"describe",width:150},{title:{CN:"rtsp",EN:"rtsp",TW:"rtsp"}[e.language],key:"rtsp",width:200},{title:{CN:"方向",EN:"direction",TW:"方向"}[e.language],key:"direction",width:100},{title:{CN:"半径",EN:"raduis",TW:"半徑"}[e.language],key:"raduis",width:100},{title:{CN:"视野角度",EN:"Angle of view",TW:"視野角度"}[e.language],key:"view",width:100},{title:{CN:"操作",EN:"Operation",TW:"操作"}[e.language],key:"operation",width:80,fixed:"right",render:function(a,n){return a("div",[a("Button",{props:{type:"error",size:"small"}},{CN:"删除",EN:"Delete",TW:"删除"}[e.language])])}}],cameraDetailInfo:{featureId:null,coordinate:null,name:"",describe:"",rtsp:"",direction:"",raduis:"",view:""},camersDatas:[],layerColumns:[],layerDatas:[],alarmColumns:[],alarmDatas:[],searchColumns:[{title:{CN:"车辆编号",EN:"Vehicle Number",TW:"車輛編號"}[e.language],key:"number",fixed:"left",width:100},{title:{CN:"车牌",EN:"License Plate",TW:"車牌"}[e.language],key:"plate",width:100},{title:{CN:"车辆类型",EN:"Vehicle Type",TW:"車輛類型"}[e.language],key:"type",width:100},{title:{CN:"归属公司",EN:"Ownership Company",TW:"歸屬公司"}[e.language],key:"company",width:100},{title:{CN:"车辆颜色",EN:"Vehicle Color",TW:"車輛顔色"}[e.language],key:"color",width:100},{title:{CN:"车辆品牌",EN:"Vehicle Brand",TW:"車輛品牌"}[e.language],key:"brand",width:100},{title:{CN:"操作",EN:"Operation",TW:"操作"}[e.language],key:"operation",width:80,fixed:"right",render:function(e,a){return e("div",[e("Icon",{props:{type:"ios-trash-outline"}})])}}],searchDatas:[{number:"车辆编号",plate:"车牌",type:"车辆类型",company:"归属公司",color:"车辆颜色",brand:"车辆品牌",operation:"操作"},{number:"车辆编号",plate:"车牌",type:"车辆类型",company:"归属公司",color:"车辆颜色",brand:"车辆品牌",operation:"操作"},{number:"车辆编号",plate:"车牌",type:"车辆类型",company:"归属公司",color:"车辆颜色",brand:"车辆品牌",operation:"操作"},{number:"车辆编号",plate:"车牌",type:"车辆类型",company:"归属公司",color:"车辆颜色",brand:"车辆品牌",operation:"操作"},{number:"车辆编号",plate:"车牌",type:"车辆类型",company:"归属公司",color:"车辆颜色",brand:"车辆品牌",operation:"操作"},{number:"车辆编号",plate:"车牌",type:"车辆类型",company:"归属公司",color:"车辆颜色",brand:"车辆品牌",operation:"操作"},{number:"车辆编号",plate:"车牌",type:"车辆类型",company:"归属公司",color:"车辆颜色",brand:"车辆品牌",operation:"操作"}]},watch:{layerControl:function(e){var a=this,n=e.indexOf("background")!=-1,t=e.indexOf("seat")!=-1,o=e.indexOf("alarm")!=-1,i=e.indexOf("vehicle")!=-1,r=e.indexOf("defens")!=-1,s=e.indexOf("camera")!=-1;a.mapContainer.layersInfo.airportPoint.setVisible(n),a.mapContainer.layersInfo.airportLine.setVisible(n),a.mapContainer.layersInfo.airportPolygo.setVisible(n),a.mapContainer.layersInfo.seat.setVisible(t),a.mapContainer.layersInfo.alarm.setVisible(o),a.mapContainer.layersInfo.vehicle.setVisible(i),a.mapContainer.layersInfo.defens.setVisible(r),a.mapContainer.layersInfo.camera.setVisible(s)}},methods:{refresh:function(){window.location.href=window.location.href},init:function(){var e=this;e.createdMap(),e.createAirportLayer(),e.createFeatureLayer(),e.createPop("addCamera","camera"),e.createPop("addDefensArea","defens"),e.createControls(),e.createdGPS()},createdMap:function(){var e=this;e.mapContainer.map=new ol.Map({target:"map",layers:[new ol.layer.Tile({source:new ol.source.OSM})],view:new ol.View({center:[113.8077,22.6286],zoom:16,projection:"EPSG:4326"})}),e.mapContainer.layersInfo.layer=e.mapContainer.map.getLayers(),e.mapContainer.viewInfo.view=e.mapContainer.map.getView(),e.mapContainer.viewInfo.zoom=e.mapContainer.viewInfo.view.getZoom(),e.mapContainer.viewInfo.center=e.mapContainer.viewInfo.view.getCenter(),e.mapContainer.viewInfo.rotation=e.mapContainer.viewInfo.view.getRotation()},createAirportLayer:function(){var e=this;e.mapContainer.layersInfo.airportPoint=new ol.layer.Tile({visible:!1,source:new ol.source.TileWMS({url:"http://43.247.68.26:9090/geoserver/sz/wms?service=WMS&version=1.1.0&request=GetMap&layers=sz:surface_region&styles=&bbox=113.76931608,22.60251774,113.84250732,22.67499654&width=768&height=760&srs=EPSG:4326&format=application/openlayers"})}),e.mapContainer.layersInfo.airportLine=new ol.layer.Tile({visible:!1,source:new ol.source.TileWMS({url:"http://43.247.68.26:9090/geoserver/sz/wms?service=WMS&version=1.1.0&request=GetMap&layers=sz:line_polyline&styles=&bbox=113.76640439999998,22.59093897,113.84873603999999,22.696465319999998&width=599&height=768&srs=EPSG:4326&format=application/openlayers"})}),e.mapContainer.layersInfo.airportPolygo=new ol.layer.Tile({visible:!1,source:new ol.source.TileWMS({url:"http://43.247.68.26:9090/geoserver/sz/wms?service=WMS&version=1.1.0&request=GetMap&layers=sz:point_position_point&styles=&bbox=113.786041,22.616661,113.824471,22.655542&width=759&height=768&srs=EPSG:4326&format=application/openlayers"})}),e.mapContainer.map.addLayer(e.mapContainer.layersInfo.airportPoint),e.mapContainer.map.addLayer(e.mapContainer.layersInfo.airportLine),e.mapContainer.map.addLayer(e.mapContainer.layersInfo.airportPolygo)},createFeatureLayer:function(){function e(e){a.mapContainer.sourceInfo[e]=new ol.source.Vector({features:[]}),a.mapContainer.layersInfo[e]=new ol.layer.Vector({source:a.mapContainer.sourceInfo[e]}),a.mapContainer.map.addLayer(a.mapContainer.layersInfo[e])}var a=this;e("seat"),e("alarm"),e("vehicle"),e("defens"),e("camera"),e("GPS")},createPop:function(e,a){var n=this;n.mapContainer.overlayInfo[a]=new ol.Overlay({element:document.getElementById(e),autoPan:!0,positioning:"top-center",stopEvent:!1,autoPanAnimation:{duration:250}}),n.mapContainer.map.addOverlay(n.mapContainer.overlayInfo[a]),n.mapContainer.overlayInfo[a].setPosition(void 0)},createControls:function(){var e=this;e.mapContainer.controlsInfo.mousePosition||(e.mapContainer.controlsInfo.mousePosition=new ol.control.MousePosition({coordinateFormat:ol.coordinate.createStringXY(4),projection:"EPSG:4326",className:"mousePositionInner",target:document.getElementById("mousePosition"),undefinedHTML:"&nbsp;"})),e.mapContainer.controlsInfo.scaleLine||(e.mapContainer.controlsInfo.scaleLine=new ol.control.ScaleLine({units:"metric"})),e.mapContainer.controlsInfo.overviewMap||(e.mapContainer.controlsInfo.overviewMap=new ol.control.OverviewMap({className:"overViewMap",layers:[new ol.layer.Tile({source:new ol.source.OSM({url:"http://{a-c}.tile.opencyclemap.org/cycle/{z}/{x}/{y}.png"})})],collapseLabel:"»",label:"«",collapsed:!1,view:new ol.View({center:[113.8077,22.6286],zoom:25,projection:"EPSG:4326"})})),e.mapContainer.controlsInfo.fullScreen||(e.mapContainer.controlsInfo.fullScreen=new ol.control.FullScreen),e.mapContainer.map.addControl(e.mapContainer.controlsInfo.mousePosition),e.mapContainer.map.addControl(e.mapContainer.controlsInfo.scaleLine),e.mapContainer.map.addControl(e.mapContainer.controlsInfo.overviewMap)},autoFocus:function(){$("body").find(".detailInfoModal input").on("click",function(){$(this).focus()})},createDefensFeature:function(e,a){var n=this,t=null,o=n.mapContainer.sourceInfo.defens.getFeatureById(a),i=function(){var a=e.replace(/\(/g,"[").replace(/\)/g,"]");return[JSON.parse(a)]}();o&&n.mapContainer.sourceInfo.defens.removeFeature(o),t=new ol.Feature({geometry:new ol.geom.Polygon(i),name:"defens"}),t.setId(a),n.mapContainer.sourceInfo.defens.addFeature(t),n.showDefensPopLayer(a,i)},setDefensRowData:function(e,a){var n=this;n.defensAreaDetailInfo=n.defensList[a],n.defensAreaDetailInfo.remark=decodeURI(n.defensList[a].remark),n.defensAreaDetailInfo.opType=2,n.createDefensFeature(n.defensList[a].areaRange.value,n.defensList[a].id)},createDefensInteraction:function(){var e=this;e.isDrawDefening=!0,e.mapContainer.interactionInfo.defens=new ol.interaction.Draw({source:e.mapContainer.sourceInfo.defens,type:"Polygon",geomertyFunction:function(e,a){a||(a=new ol.geom.Polygon(null));var n=e[0],t=e[1];return a.setCoordinates([[n,[n[0],t[1]],t,[t[0],n[0]],n]]),a}}),e.mapContainer.map.addInteraction(e.mapContainer.interactionInfo.defens),e.bindDefensDrawEndEvent()},bindDefensDrawEndEvent:function(){var e=this;e.mapContainer.interactionInfo.defens.on("drawend",function(n){var t=n.feature,o=e.mapContainer.sourceInfo.defens.getFeatures(),i=t.getGeometry(),r=i.getCoordinates(),s="defens_"+(o.length+1);t.setId(s),t.set("name","defens"),e.defensAreaDetailInfo={id:"",featureId:s,opType:1,companyId:"",deptId:"",areaName:"",areaCode:"",secureStatus:"",areaRangeStr:function(){for(var e=[],a=r[0],n=0,t=a.length;n<t;n++)e.push(a[n].join(","));return e.join(";")}(),speedLimit:"",staySecond:"",remark:"",createUserId:a.id,modifyUserId:a.id},e.showDefensPopLayer(s,r),e.deleteDefensAction()},this)},formatDefensData:function(){for(var e=this,a=0,n=e.defensList.length;a<n;a++)e.defensDatas.push({areaName:decodeURI(e.defensList[a].areaName),areaCode:decodeURI(e.defensList[a].areaCode),secureStatus:function(){for(var n="",t=0,o=e.secureAreaStatusList.length;t<o;t++)if(e.secureAreaStatusList[t].type==e.defensList[a].secureStatus){n=e.secureAreaStatusList[t].name;break}return n}(),speedLimit:e.defensList[a].speedLimit,staySecond:e.defensList[a].staySecond})},getDefensAreaList:function(e){var a=this;1==e&&(a.defensDatas=[],a.defensList=[],a.defensPageInfo.pageNum=0),setTimeout(function(){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.areaService+"?action="+CONFIG.ACTION.getSecureAreaList,actionUrl:CONFIG.SERVICE.areaService,dataObj:a.defensPageInfo,successCallback:function(e){200==e.code&&(a.defensList=e.data,a.defensPageInfo.count=e.count,a.formatDefensData())}})},500)},defensPageSizeChange:function(){var e=this;e.defensPageInfo.pageNum=parseInt(value,10)-1,setTimeout(function(){e.getDefensAreaList(!1)},200)},selectDefensArea:function(e){var a=this;0==a.isDeleteDefens&&(a.defensAreaDetailInfo=a.defensList[e.index],a.isAddDefensDetailInfo=!1,setTimeout(function(){a.isAddDefensDetailInfo=!0,a.mapContainer.overlayInfo.defens.setPosition([[[113.80963683128357,22.631996870040894],[113.8097870349884,22.62787699699402],[113.80701899528503,22.6288640499115],[113.80738377571106,22.63058066368103],[113.8082206249237,22.631481885910034],[113.80963683128357,22.631996870040894]]]),a.autoFocus()},200))},showDefensPopLayer:function(e,a){for(var n=this,t=0,o=n.defensList.length;t<o;t++)if(e==n.defensList[t].id){n.defensAreaDetailInfo=n.defensList[t];break}n.isAddDefensDetailInfo=!1,setTimeout(function(){n.isAddDefensDetailInfo=!0,n.mapContainer.overlayInfo.defens.setPosition(a),n.autoFocus()},500)},addDefensAction:function(){var e=this;e.mapContainer.map.removeInteraction(e.mapContainer.interactionInfo.defens),e.isAddDefensAction=!0,e.createDefensInteraction()},deleteDefensAction:function(){var e=this;e.mapContainer.map.removeInteraction(e.mapContainer.interactionInfo.defens),e.isAddDefensAction=!1,e.isDrawDefening=!1},deleteDefensArea:function(){var e=this,n=null,t=e.defensAreaDetailInfo.id||e.defensAreaDetailInfo.featureId;e.isAddDefensDetailInfo=!1,n=e.mapContainer.sourceInfo.defens.getFeatureById(t),e.mapContainer.sourceInfo.defens.removeFeature(n),e.defensAreaDetailInfo.id&&utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.areaService+"?action="+CONFIG.ACTION.delSecureArea,actionUrl:CONFIG.SERVICE.areaService,dataObj:{ids:e.defensAreaDetailInfo.id,modifyUserId:a.id},successCallback:function(n){200==n.code?(e.getDefensAreaList(!0),setTimeout(function(){e.deleteLoading=!1,e.isDeleteDefens=!1,e.defensAreaDetailInfo={id:"",opType:1,companyId:"",deptId:"",areaName:"",areaCode:"",secureStatus:"",areaRangeStr:"",speedLimit:"",staySecond:"",remark:"",createUserId:a.id,modifyUserId:a.id}},500)):e.$Message.error(n.message)}})},uploadDefensAreaDetailInfoToServer:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.areaService+"?action="+CONFIG.ACTION.saveSecureArea,actionUrl:CONFIG.SERVICE.areaService,dataObj:{id:e.defensAreaDetailInfo.id,opType:e.defensAreaDetailInfo.opType,companyId:e.defensAreaDetailInfo.companyId,deptId:e.defensAreaDetailInfo.deptId,areaName:encodeURI(e.defensAreaDetailInfo.areaName),areaCode:encodeURI(e.defensAreaDetailInfo.areaCode),secureStatus:e.defensAreaDetailInfo.secureStatus,areaRangeStr:e.defensAreaDetailInfo.areaRangeStr,speedLimit:e.defensAreaDetailInfo.speedLimit,staySecond:e.defensAreaDetailInfo.staySecond,remark:encodeURI(e.defensAreaDetailInfo.remark),createUserId:e.defensAreaDetailInfo.createUserId,modifyUserId:e.defensAreaDetailInfo.modifyUserId},successCallback:function(a){200==a.code?(e.getDefensAreaList(!0),setTimeout(function(){e.isAddDefensDetailInfo=!1,e.addLoading=!1},500)):e.$Message.error(a.message)}})},createCameraFeature:function(e){var a=this,n=null,t=a.mapContainer.sourceInfo.camera.getFeatures().length,o="camera_"+(t+1),i="camera";a.isAddCameraAction&&(n=new ol.Feature({geometry:new ol.geom.Point(e),name:i}),n.setId(o),n.setStyle(new ol.style.Style({image:new ol.style.Icon({anchor:[.5,.5],anchorOrigin:"top-right",anchorXUnits:"fraction",anchorYUnits:"pixels",offsetOrigin:"top-right",opacity:.75,src:"/airport/assets/img/camera.png"})})),a.mapContainer.sourceInfo.camera.addFeature(n),a.isAddCameraAction=!1,a.mapContainer.featrueInfo.clickId=o,a.mapContainer.featrueInfo.clickName=i,a.showCameraPopLayer(o,e))},showCameraPopLayer:function(e,a){var n=this;n.isAddcameraDetailInfo=!1,n.cameraDetailInfo=function(){for(var t={featureId:e,coordinate:a,name:"",describe:"",rtsp:"",direction:"",raduis:"",view:""},o=0,i=n.camersDatas.length;o<i;o++)if(n.camersDatas[o].featureId==e){t=n.camersDatas[o];break}return t}(),setTimeout(function(){n.isAddcameraDetailInfo=!0,n.mapContainer.overlayInfo.camera.setPosition(a),n.autoFocus()},500)},selectCamera:function(e){var a=this,n=null;0==a.isDeleteCamera&&(n=e.coordinate,a.cameraDetailInfo=e,a.isAddcameraDetailInfo=!1,setTimeout(function(){a.isAddcameraDetailInfo=!0,a.mapContainer.overlayInfo.camera.setPosition(n),a.autoFocus()},200))},deleteCamera:function(e){var a=this,n=null,t=a.cameraDetailInfo.featureId;a.cameraDetailInfo={featureId:null,coordinate:null,name:"",describe:"",rtsp:"",direction:"",raduis:"",view:""},a.isAddcameraDetailInfo=!1,n=a.mapContainer.sourceInfo.camera.getFeatureById(t),a.mapContainer.sourceInfo.camera.removeFeature(n);for(var o=0,i=a.camersDatas.length;o<i;o++)if(a.camersDatas[o].featureId==t){a.camersDatas.splice(o,1);break}setTimeout(function(){a.deleteLoading=!1,a.isDeleteCamera=!1},500)},uploadCameraDetailInfoToServer:function(){var e=this;e.camersDatas.push(e.cameraDetailInfo),e.addLoading=!e.addLoading,e.isAddcameraDetailInfo=!e.isAddcameraDetailInfo,setTimeout(function(){e.addLoading=!e.addLoading},500)},showModal:function(e){var a=this;for(var n in a.modal)a.modal[n]=!1;a.modal[e]=!0},formatVehicle:function(){for(var e=this,a=0,n=e.vehicleList.length;a<n;a++)e.vehicleDatas({number:e.vehicleList[a].vehicleCode,vehicleName:e.vehicleList[a].vehicleName,state:function(){for(var n="",t=0,o=e.terminalStatusList.length;t<o;t++)if(e.terminalStatusList[t].type==e.vehicleList[a].vehicleStatus){n=e.terminalStatusList[t].name;break}return n}()})},getVehicleList:function(e){var a=this;1==e&&(a.vehicleDatas=[],a.vehiclePageInfo.pageNum=0),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.vehicleService+"?action="+CONFIG.ACTION.getVehicleList,actionUrl:CONFIG.SERVICE.vehicleService,dataObj:a.vehiclePageInfo,successCallback:function(e){200==e.code&&(a.vehicleList=e.data,a.vehiclePageInfo.count=e.count,a.formatVehicle())}})},vehiclePageSizeChange:function(){var e=this;e.vehiclePageInfo.pageNum=parseInt(value,10)-1,setTimeout(function(){e.getVehicleList(!1)},200)},createdGPS:function(){var e=this;e.mapContainer.geolocationInfo.GPS=new ol.Geolocation({projection:e.mapContainer.viewInfo.view.getProjection(),trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),e.mapContainer.geolocationInfo.GPS.setTracking(!0),console.log(e.mapContainer.geolocationInfo.GPS),e.createdPositionFeature(),e.createdAccuracyFreature(),e.mapContainer.geolocationInfo.GPS.on("error",function(e){console.log(e.message)})},createdPositionFeature:function(){var e=this,a=new ol.Feature;a.setStyle(new ol.style.Style({image:new ol.style.Circle({raduis:6,fill:new ol.style.Fill({color:"#3399cc"}),stroke:new ol.style.Stroke({color:"#fff",width:2})})})),e.mapContainer.sourceInfo.GPS.addFeature(a),e.mapContainer.geolocationInfo.GPS.on("change:position",function(){var n=e.mapContainer.geolocationInfo.GPS.getPosition();a.setGeometry(n?new ol.geom.Point(n):null)})},createdAccuracyFreature:function(){var e=this,a=new ol.Feature;e.mapContainer.sourceInfo.GPS.addFeature(a),e.mapContainer.geolocationInfo.GPS.on("change:accuracyGeometry",function(){a.setGeometry(e.mapContainer.geolocationInfo.GPS.getAccuracyGeometry())})},getCompanyList:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.companyService+"?action="+CONFIG.ACTION.getCompanyList,actionUrl:CONFIG.SERVICE.companyService,dataObj:{id:0,pageSize:1e4},successCallback:function(a){200==a.code&&(e.companyList=a.data)}})}},created:function(){var e=this;utility.isLogin(!1),setTimeout(function(){e.init(),e.getVehicleList(!0),e.getDefensAreaList(!0),e.getCompanyList(),e.mapContainer.map.on("click",function(a){var n=a.coordinate,t=a.originalEvent.target.nodeName.toLowerCase(),o=e.mapContainer.map.forEachFeatureAtPixel(a.pixel,function(e,a){return e});if("canvas"==t&&o)switch(e.mapContainer.featrueInfo.clickId=o.getId(),e.mapContainer.featrueInfo.clickName=o.get("name"),e.mapContainer.featrueInfo.clickPos=a.pixel,e.mapContainer.featrueInfo.clickName){case"camera":e.showCameraPopLayer(e.mapContainer.featrueInfo.clickId,n);break;case"defens":e.showDefensPopLayer(e.mapContainer.featrueInfo.clickId,n);break;default:console.log(o)}else e.createCameraFeature(n)})},2e3)}})})();