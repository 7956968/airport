function forEachPoint(r){return function(e,t,o){var a,n=e.length,i=o||2;a=t||(2!==i?e.slice():new Array(n));for(var c=0;c<n;c+=i)r(e,a,c);return a}}function getRange(r,e,t){return r=Math.max(r,e),r=Math.min(r,t),r}function getLoop(r,e,t){for(var o=t-e;r>t;)r-=o;for(;r<e;)r+=o;return r}function convertor(r,e,t,o){var a=r[t],n=r[t+1],i=o[0]+o[1]*Math.abs(a),c=Math.abs(n)/o[9],l=o[2]+o[3]*c+o[4]*c*c+o[5]*c*c*c+o[6]*c*c*c*c+o[7]*c*c*c*c*c+o[8]*c*c*c*c*c*c;e[t]=i*(a<0?-1:1),e[t+1]=l*(n<0?-1:1)}function delta(r,e){var t=transformLat(r-105,e-35),o=transformLon(r-105,e-35),a=e/180*PI,n=Math.sin(a);n=1-OFFSET*n*n;var i=Math.sqrt(n);return t=180*t/(AXIS*(1-OFFSET)/(n*i)*PI),o=180*o/(AXIS/i*Math.cos(a)*PI),[o,t]}function outOfChina(r,e){return r<72.004||r>137.8347||(e<.8293||e>55.8271)}function transformLat(r,e){var t=2*r-100+3*e+.2*e*e+.1*r*e+.2*Math.sqrt(Math.abs(r));return t+=2*(20*Math.sin(6*r*PI)+20*Math.sin(2*r*PI))/3,t+=2*(20*Math.sin(e*PI)+40*Math.sin(e/3*PI))/3,t+=2*(160*Math.sin(e/12*PI)+320*Math.sin(e*PI/30))/3,t}function transformLon(r,e){var t=300+r+2*e+.1*r*r+.1*r*e+.1*Math.sqrt(Math.abs(r));return t+=2*(20*Math.sin(6*r*PI)+20*Math.sin(2*r*PI))/3,t+=2*(20*Math.sin(r*PI)+40*Math.sin(r/3*PI))/3,t+=2*(150*Math.sin(r/12*PI)+300*Math.sin(r/30*PI))/3,t}function toGCJ02(r,e,t){var o=r[t]-.0065,a=r[t+1]-.006,n=Math.sqrt(o*o+a*a)-2e-5*Math.sin(a*X_PI),i=Math.atan2(a,o)-3e-6*Math.cos(o*X_PI);return e[t]=n*Math.cos(i),e[t+1]=n*Math.sin(i),e}function fromGCJ02(r,e,t){var o=r[t],a=r[t+1],n=Math.sqrt(o*o+a*a)+2e-5*Math.sin(a*X_PI),i=Math.atan2(a,o)+3e-6*Math.cos(o*X_PI);return e[t]=n*Math.cos(i)+.0065,e[t+1]=n*Math.sin(i)+.006,e}var sphericalMercator={},baiduMercator={},RADIUS=6378137,MAX_LATITUDE=85.0511287798,RAD_PER_DEG=Math.PI/180,MCBAND=[12890594.86,8362377.87,5591021,3481989.83,1678043.12,0],LLBAND=[75,60,45,30,15,0],MC2LL=[[1.410526172116255e-8,898305509648872e-20,-1.9939833816331,200.9824383106796,-187.2403703815547,91.6087516669843,-23.38765649603339,2.57121317296198,-.03801003308653,17337981.2],[-7.435856389565537e-9,8983055097726239e-21,-.78625201886289,96.32687599759846,-1.85204757529826,-59.36935905485877,47.40033549296737,-16.50741931063887,2.28786674699375,10260144.86],[-3.030883460898826e-8,898305509983578e-20,.30071316287616,59.74293618442277,7.357984074871,-25.38371002664745,13.45380521110908,-3.29883767235584,.32710905363475,6856817.37],[-1.981981304930552e-8,8983055099779535e-21,.03278182852591,40.31678527705744,.65659298677277,-4.44255534477492,.85341911805263,.12923347998204,-.04625736007561,4482777.06],[3.09191371068437e-9,8983055096812155e-21,6995724062e-14,23.10934304144901,-.00023663490511,-.6321817810242,-.00663494467273,.03430082397953,-.00466043876332,2555164.4],[2.890871144776878e-9,8983055095805407e-21,-3.068298e-8,7.47137025468032,-353937994e-14,-.02145144861037,-1234426596e-14,.00010322952773,-323890364e-14,826088.5]],LL2MC=[[-.0015702102444,111320.7020616939,0x60e374c3105a3,-0x24bb4115e2e164,0x5cc55543bb0ae8,-0x7ce070193f3784,0x5e7ca61ddf8150,-0x261a578d8b24d0,0x665d60f3742ca,82.5],[.0008277824516172526,111320.7020463578,647795574.6671607,-4082003173.641316,10774905663.51142,-15171875531.51559,12053065338.62167,-5124939663.577472,913311935.9512032,67.5],[.00337398766765,111320.7020202162,4481351.045890365,-23393751.19931662,79682215.47186455,-115964993.2797253,97236711.15602145,-43661946.33752821,8477230.501135234,52.5],[.00220636496208,111320.7020209128,51751.86112841131,3796837.749470245,992013.7397791013,-1221952.21711287,1340652.697009075,-620943.6990984312,144416.9293806241,37.5],[-.0003441963504368392,111320.7020576856,278.2353980772752,2485758.690035394,6070.750963243378,54821.18345352118,9540.606633304236,-2710.55326746645,1405.483844121726,22.5],[-.0003218135878613132,111320.7020701615,.00369383431289,823725.6402795718,.46104986909093,2351.343141331292,1.58060784298199,8.77738589078284,.37238884252424,7.45]],gcj02={},PI=Math.PI,AXIS=6378245,OFFSET=.006693421622965943,bd09={},X_PI=(PI=Math.PI,3e3*PI/180);sphericalMercator.forward=forEachPoint(function(r,e,t){var o=Math.max(Math.min(MAX_LATITUDE,r[t+1]),-MAX_LATITUDE),a=Math.sin(o*RAD_PER_DEG);e[t]=RADIUS*r[t]*RAD_PER_DEG,e[t+1]=RADIUS*Math.log((1+a)/(1-a))/2}),sphericalMercator.inverse=forEachPoint(function(r,e,t){e[t]=r[t]/RADIUS/RAD_PER_DEG,e[t+1]=(2*Math.atan(Math.exp(r[t+1]/RADIUS))-Math.PI/2)/RAD_PER_DEG}),baiduMercator.forward=forEachPoint(function(r,e,t){var o,a=getLoop(r[t],-180,180),n=getRange(r[t+1],-74,74),i=null;for(o=0;o<LLBAND.length;++o)if(n>=LLBAND[o]){i=LL2MC[o];break}if(null===i)for(o=LLBAND.length-1;o>=0;--o)if(n<=-LLBAND[o]){i=LL2MC[o];break}e[t]=a,e[t+1]=n,convertor(e,e,t,i)}),baiduMercator.inverse=forEachPoint(function(r,e,t){for(var o=Math.abs(r[t+1]),a=null,n=0;n<MCBAND.length;n++)if(o>=MCBAND[n]){a=MC2LL[n];break}convertor(r,e,t,a)}),gcj02.toWGS84=forEachPoint(function(r,e,t){var o=r[t],a=r[t+1];if(!outOfChina(o,a)){var n=delta(o,a);o-=n[0],a-=n[1]}e[t]=o,e[t+1]=a}),gcj02.fromWGS84=forEachPoint(function(r,e,t){var o=r[t],a=r[t+1];if(!outOfChina(o,a)){var n=delta(o,a);o+=n[0],a+=n[1]}e[t]=o,e[t+1]=a}),bd09.toWGS84=function(r,e,t){var o=forEachPoint(toGCJ02)(r,e,t);return gcj02.toWGS84(o,o,t)},bd09.fromWGS84=function(r,e,t){var o=gcj02.fromWGS84(r,e,t);return forEachPoint(fromGCJ02)(o,o,t)};var projzh={smerc2bmerc:function(r,e,t){var o=sphericalMercator.inverse(r,e,t);return o=bd09.fromWGS84(o,o,t),baiduMercator.forward(o,o,t)},bmerc2smerc:function(r,e,t){var o=baiduMercator.inverse(r,e,t);return o=bd09.toWGS84(o,o,t),sphericalMercator.forward(o,o,t)},bmerc2ll:function(r,e,t){var o=baiduMercator.inverse(r,e,t);return bd09.toWGS84(o,o,t)},ll2bmerc:function(r,e,t){var o=bd09.fromWGS84(r,e,t);return baiduMercator.forward(o,o,t)}};projzh.ll2smerc=sphericalMercator.forward,projzh.smerc2ll=sphericalMercator.inverse;for(var bmercResolutions=[],i=0;i<=18;i++)bmercResolutions[i]=Math.pow(2,18-i);var extent=[72.004,.8293,137.8347,55.8271],baiduMercatorProject=new ol.proj.Projection({code:"baidu",extent:ol.extent.applyTransform(extent,projzh.ll2bmerc),units:"m"}),tileGrid=new ol.tilegrid.TileGrid({resolutions:bmercResolutions,origin:[0,0],extent:ol.extent.applyTransform(extent,projzh.ll2bmerc),tileSize:[256,256]});ol.proj.addProjection(baiduMercatorProject),ol.proj.addCoordinateTransforms("EPSG:4326",baiduMercatorProject,projzh.ll2bmerc,projzh.bmerc2ll),ol.proj.addCoordinateTransforms("EPSG:3857",baiduMercatorProject,projzh.smerc2bmerc,projzh.bmerc2smerc);var loadMapType={baidu:function(){return{vector:new ol.layer.Tile({source:new ol.source.XYZ({projection:baiduMercatorProject,tileGrid:tileGrid,tileUrlFunction:function(r,e,t){if(!r)return"";var o=r[0],a=r[1],n=r[2];return a<0&&(a="M"+-a),n<0&&(n="M"+-n),"http://online9.map.bdimg.com/onlinelabel/?qt=tile&x="+a+"&y="+n+"&z="+o+"&styles=pl&udt=20180303&scaler=1&p=110"}})}),satellite:new ol.layer.Tile({source:new ol.source.XYZ({projection:baiduMercatorProject,tileGrid:tileGrid,tileUrlFunction:function(r,e,t){var o=r[1],a=r[2],n=r[0];return o<0&&(o="M"+-o),a<0&&(a="M"+-a),"http://shangetu"+parseInt(10*Math.random())+".map.bdimg.com/it/u=x="+o+";y="+a+";z="+n+";v=009;type=sate&fm=46&udt=20180303"}})})}},google:function(){return{vector:new ol.layer.Tile({source:new ol.source.XYZ({projection:"EPSG:3857",url:"http://www.google.cn/maps/vt/pb=!1m4!1m3!1i{z}!2i{x}!3i{y}!2m3!1e0!2sm!3i380072576!3m8!2szh-CN!3scn!5e1105!12m4!1e68!2m2!1sset!2sRoadmap!4e0!5m1!1e0"})}),satellite:new ol.layer.Tile({projection:"EPSG:3857",source:new ol.source.XYZ({url:"http://mt2.google.cn/vt/lyrs=y&hl=zh-CN&gl=CN&src=app&x={x}&y={y}&z={z}&s=G"}),visible:!1})}},gaoDe:function(){return{vector:new ol.layer.Tile({source:new ol.source.XYZ({url:"http://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=7&x={x}&y={y}&z={z}"})}),satellite:new ol.layer.Tile({source:new ol.source.XYZ({url:"http://wprd0{1-4}.is.autonavi.com/appmaptile?lang=zh_cn&size=1&style=6&x={x}&y={y}&z={z}"})})}},tianDitu:function(){return{vector:new ol.layer.Tile({projection:ol.proj.get("EPSG:3857"),crossOrigin:"anonymous",source:new ol.source.XYZ({url:"http://t{0-4}.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}"})}),satellite:new ol.layer.Tile({projection:ol.proj.get("EPSG:3857"),crossOrigin:"anonymous",source:new ol.source.XYZ({url:"http://t{0-4}.tianditu.com/DataServer?T=img_w&x={x}&y={y}&l={z}"})})}}};