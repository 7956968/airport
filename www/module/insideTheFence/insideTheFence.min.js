(function(){var e,a=utility.getLocalStorage("language"),i=(utility.getLocalStorage("userInfo"),utility.getLocalStorage("bizParam")),t=new Vue({el:"#js-vue",data:{language:a?a.language:"CN",isTableLoading:!0,isShowModal:!1,isShowTerminal:!1,isModalLoading:!0,modalTitle:"",tableHeight:(e=$(".tableContainer").height(),e-100),vehiclePassType:i.vehiclePassType,pageInfo:{count:0,pageNum:1,areaId:"",pageSize:20,areaName:"",areaCode:"",vehicleId:"",companyId:"",vehicleName:"",vehicleCode:"",crossTypeId:""},columnsList:[{type:"index",width:60,align:"center"},{title:{CN:"防区名称",EN:"Defense Name",TW:"防區名稱"}[a.language],key:"areaName"},{title:{CN:"防区编码",EN:"Defense Code",TW:"防區編碼"}[a.language],key:"areaCode"},{title:{CN:"车辆名称",EN:"Vehicle Name",TW:"車輛名稱"}[a.language],key:"vehicleName"},{title:{CN:"车辆编码",EN:"Vehicle Type",TW:"車輛編碼"}[a.language],key:"vehicleCode"},{title:{CN:"防区类型",EN:"Defense Type",TW:"防區類型"}[a.language],key:"crossTypeName"},{title:{CN:"行驶速度",EN:"Speed",TW:"行駛速度"}[a.language],key:"speed",sortable:!0,render:function(e,a){return e("div",[e("span",{},a.row.speed+"（公里/小时）")])}},{title:{CN:"时间",EN:"Time",TW:"時間"}[a.language],key:"crossTime",width:160},{title:{CN:"坐标位置",EN:"Coordinate",TW:"座標位置"}[a.language],key:"currPosition",width:250,render:function(e,a){var i=JSON.parse(t.dataList[a.index].currPosition).coordinates.join(",");return e("div",i)}}],dataList:[],companyList:[]},methods:{refresh:function(){var e=this;window.location.href=window.location.href,0==e.isTableLoading&&(e.isTableLoading=!0,setTimeout(function(){e.isTableLoading=!1},3e3))},pageSizeChange:function(e){var a=this;a.pageInfo.pageNum=parseInt(e,10),setTimeout(function(){a.getCrossAreaList(!1)},200)},pageRowChange:function(e){var a=this;a.pageInfo.pageSize=parseInt(e,10),setTimeout(function(){a.getCrossAreaList(!1)},200)},getCrossAreaList:function(e){var a=this;a.dataList=[],1==e&&(a.pageInfo.pageNum=0),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.vehicleService+"?action="+CONFIG.ACTION.getCrossAreaList,actionUrl:CONFIG.SERVICE.vehicleService,dataObj:{areaId:a.pageInfo.areaId,pageNum:a.pageInfo.pageNum,areaCode:a.pageInfo.areaCode,pageSize:a.pageInfo.pageSize,vehicleId:a.pageInfo.vehicleId,companyId:a.pageInfo.companyId,vehicleCode:a.pageInfo.vehicleCode,crossTypeId:a.pageInfo.crossTypeId,areaName:encodeURI(a.pageInfo.areaName),vehicleName:encodeURI(a.pageInfo.vehicleName)},beforeSendCallback:function(){a.isTableLoading=!0},completeCallback:function(){a.isTableLoading=!1},successCallback:function(e){200==e.code&&(a.dataList=e.data,a.pageInfo.count=e.count)}})},getCompanyList:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.companyService+"?action="+CONFIG.ACTION.getCompanyList,actionUrl:CONFIG.SERVICE.companyService,dataObj:{id:0,pageSize:1e4},successCallback:function(a){200==a.code&&(e.companyList=a.data)}})}},created:function(){var e=this;utility.isLogin(!1),setTimeout(function(){e.getCompanyList(),e.getCrossAreaList(!0)},500)}})})();