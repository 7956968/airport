(function(){var e,t=utility.getLocalStorage("language"),a=utility.getLocalStorage("userInfo"),i=(utility.getLocalStorage("bizParam"),new Vue({el:"#js-vue",data:{language:t?t.language:"CN",isTableLoading:!0,isShowModal:!1,isShowDetail:!1,isModalLoading:!0,modalTitle:"",tableHeight:(e=$(".tableContainer").height(),e-100),count:0,pageInfo:{companyId:"",name:"",type:"",cateCode:"vehicleType"},page:{count:0,pageSize:20,pageNum:0},index:0,selectItem:"",itemInfo:{id:"",createUserId:a.id,modifyUserId:a.id,companyId:"",name:"",type:"",cateCode:"vehicleType"},columnsList:[{type:"index",width:60,align:"center",title:"序号"},{title:{CN:"公司",EN:"Company name",TW:"公司名稱"}[t.language],key:"companyName",width:280},{title:"车辆类型编号",key:"type"},{title:"车辆类型名称",key:"name"},{title:"创建时间",key:"createTime"},{title:{CN:"操作",EN:"Operation",TW:"操作"}[t.language],key:"operation",align:"center",width:120,render:function(e,a){return e("div",[e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){i.index=a.index,i.selectItem=a.row,i.editItem()}}},{CN:"编辑",EN:"Edite",TW:"編輯"}[t.language]),e("Button",{props:{type:"error",size:"small"},on:{click:function(){i.index=a.index,i.selectItem=a.row,i.delItem()}}},{CN:"删除",EN:"Delete",TW:"刪除"}[t.language])])}}],companyList:[],tableRowList:[]},methods:{refresh:function(){var e=this;window.location.href=window.location.href,0==e.isTableLoading&&(e.isTableLoading=!0,setTimeout(function(){e.isTableLoading=!1},3e3))},addItem:function(){var e=this;e.isShowModal=!0,e.isModalLoading=!0,e.modalTitle={CN:"新增",EN:"Add",TW:"新增"}[e.language],e.itemInfo={id:"",createUserId:a.id,modifyUserId:a.id,companyId:"",name:"",type:"",cateCode:"vehicleType"}},editItem:function(){var e=this;utility.showMessageTip(e,function(){e.itemInfo=e.tableRowList[e.index],e.isShowModal=!0,e.modalTitle={CN:"修改",EN:"Edit",TW:"修改"}[e.language]})},showDetail:function(){var e=this;utility.showMessageTip(e,function(){e.itemInfo=JSON.parse(JSON.stringify(e.tableRowList[e.index])),e.isShowDetail=!0})},delItem:function(){var e=this;e.$Modal.confirm({title:"确定删除？",width:200,onOk:function(){e.itemInfo=e.tableRowList[e.index],utility.showMessageTip(e,function(){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.sysParaService+"?action="+CONFIG.ACTION.delSysPara,dataObj:{ids:e.itemInfo.id,modifyUserId:a.id},actionUrl:CONFIG.SERVICE.sysParaService,beforeSendCallback:function(){e.isTableLoading=!0},completeCallback:function(){e.isTableLoading=!1},successCallback:function(t){200==t.code?(e.getBizParam(),e.getSysParaList(!0)):e.$Message.error(t.message)}})})}})},setCurrentRowData:function(e,t){var a=this;e&&(a.index=t,a.selectItem=e)},uploadDataToServer:function(){var e=this;return utility.checkLen(e.itemInfo.companyId,0)?(e.$Message.error("请选择公司"),void(e.isModalLoading=!1)):utility.checkLen(e.itemInfo.type,0)?(e.$Message.error("请填写编码"),void(e.isModalLoading=!1)):utility.checkLen(e.itemInfo.name,0)?(e.$Message.error("请填写名称"),void(e.isModalLoading=!1)):utility.checkIsNum(e.itemInfo.type)?void utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.sysParaService+"?action="+CONFIG.ACTION.saveSysPara,actionUrl:CONFIG.SERVICE.sysParaService,dataObj:{id:e.itemInfo.id,createUserId:a.id,modifyUserId:a.id,companyId:e.itemInfo.companyId,name:encodeURI(e.itemInfo.name),type:encodeURI(e.itemInfo.type),cateCode:"vehicleType"},completeCallback:function(){e.isModalLoading=!1},successCallback:function(t){200==t.code?(e.getBizParam(),e.getSysParaList(!0),e.isShowModal=!1):e.$Message.error(t.message)}}):(e.$Message.error("编码只能是数字"),void(e.isModalLoading=!1))},pageSizeChange:function(e){var t=this;t.page.pageNum=parseInt(e,10),setTimeout(function(){t.getSysParaList(!1)},200)},pageRowChange:function(e){var t=this;t.page.pageSize=parseInt(e,10),setTimeout(function(){t.getSysParaList(!0)},200)},getSysParaList:function(e){var t=this;t.tableRowList=[],t.tableRowList=[],1==e&&(t.page.pageNum=1),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.sysParaService+"?action="+CONFIG.ACTION.getSysParaList,actionUrl:CONFIG.SERVICE.sysParaService,dataObj:{pageNum:t.page.pageNum,pageSize:t.page.pageSize,companyId:t.pageInfo.companyId,name:encodeURI(t.pageInfo.name),type:encodeURI(t.pageInfo.type),cateCode:"vehicleType"},beforeSendCallback:function(){},completeCallback:function(){t.isTableLoading=!1},successCallback:function(e){200==e.code&&(t.tableRowList=e.data,t.page.count=e.count)}})},setAllInfo:function(){for(var e=this,t=[{type:300,name:"冷藏车"},{type:304,name:"行李传送车"},{type:305,name:"摆渡车"},{type:306,name:"升降平台车"},{type:307,name:"客梯车"},{type:107,name:"行李牵引车"},{type:108,name:"飞机牵引车"},{type:109,name:"残疾人登机车"},{type:110,name:"冷藏车"},{type:111,name:"垃圾车"},{type:112,name:"除冰车"}],i=0,n=e.companyList.length;i<n;i++)(function(i){console.log(e.companyList[i].id+"_"+e.companyList[i].companyName);for(var n=0,o=t.length;n<o;n++)console.log(t[n].type+"-"+t[n].name),function(n){e.itemInfo={id:"",createUserId:a.id,modifyUserId:a.id,companyId:e.companyList[i].id,name:t[n].name,type:t[n].type,cateCode:"vehicleBrand"},e.uploadDataToServer()}(n)})(i)},getCompanyList:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.companyService+"?action="+CONFIG.ACTION.getCompanyList,actionUrl:CONFIG.SERVICE.companyService,dataObj:{id:0,pageSize:1e4},successCallback:function(t){200==t.code&&(e.companyList=t.data)}})},getBizParam:function(){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.commonService+"?action="+CONFIG.ACTION.getBizParam,actionUrl:CONFIG.SERVICE.commonService,dataObj:{companyId:a.companyId},successCallback:function(e){200==e.code&&utility.setLocalStorage("bizParam",e.data)}})}},created:function(){var e=this;utility.isLogin(!1),setTimeout(function(){e.getCompanyList(),e.getSysParaList(!0),e.$watch("pageInfo",function(){e.tableRowList=[],e.getSysParaList(!0)},{deep:!0})},500)}}))})();