(function(){var e,t=utility.getLocalStorage("language"),i=(utility.getLocalStorage("userInfo"),[]),a=new Vue({el:"#js-vue",data:{language:t?t.language:"CN",isTableLoading:!0,isShowModal:!1,isShowTerminal:!1,isModalLoading:!0,tableHeight:(e=$(".tableContainer").height(),e-100),pageInfo:{pageNum:1,pageSize:20,userCode:"",beginTime:"",endTime:"",opTypeCode:"1",opFunctionCode:"",opFunctionDesc:""},columnsList:[{type:"index",width:60,title:"序号",align:"center"},{title:{CN:"操作时间",EN:"Message Time",TW:"操作時間"}[t.language],key:"createTime",align:"center",sortable:!0,sortType:"des"},{title:{CN:"操作用户",EN:"Operating User",TW:"操作用戶"}[t.language],key:"userCode",align:"center",filters:i,filterMultiple:!1,filterRemote(e,t){a.pageInfo.userCode=e}},{title:{CN:"IP地址",EN:"IP Address",TW:"車輛名稱"}[t.language],key:"fromIp",align:"center"},{title:{CN:"系统功能",EN:"System Function",TW:"系統功能"}[t.language],key:"opTypeDesc",align:"center"},{title:{CN:"操作类型",EN:"Operation Type",TW:"操作類型"}[t.language],key:"opFunctionDesc",align:"center"},{title:{CN:"执行结果",EN:"Execution Result",TW:"執行結果"}[t.language],key:"opResult",align:"center"}],dataList:[]},watch:{},methods:{refresh:function(){var e=this;window.location.href=window.location.href,0==e.isTableLoading&&(e.isTableLoading=!0,setTimeout(function(){e.isTableLoading=!1},3e3))},beginTimeChange:function(e,t){var i=this;i.pageInfo.beginTime=e},endTimeChange:function(e,t){var i=this;i.pageInfo.endTime=e},pageSizeChange:function(e){var t=this;t.pageInfo.pageNum=parseInt(e,10),setTimeout(function(){t.getUserLogList(!1)},200)},pageRowChange:function(e){var t=this;t.pageInfo.pageSize=parseInt(e,10),setTimeout(function(){t.getUserLogList(!1)},200)},getLogByCode:function(e){var t=this;t.pageInfo.opTypeCode=e,t.getUserLogList(!0)},getUserLogList:function(e){var t=this;t.logList=[],1==e&&(t.pageInfo.pageNum=1),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.userService+"?action="+CONFIG.ACTION.getUserLogList,actionUrl:CONFIG.SERVICE.userService,dataObj:t.pageInfo,beforeSendCallback:function(){t.isTableLoading=!0},completeCallback:function(){t.isTableLoading=!1},successCallback:function(e){200==e.code&&(t.dataList=e.data,t.pageInfo.count=e.count)}})},getUserList:function(e){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.userService+"?action="+CONFIG.ACTION.getUserList,actionUrl:CONFIG.SERVICE.userService,dataObj:{pageNum:1,pageSize:1e4,companyId:0,deptId:0},successCallback:function(e){if(200==e.code)for(var t=0,a=e.data.length;t<a;t++)i.push({label:e.data[t].userCode,value:e.data[t].userCode})}})}},created:function(){var e=this;utility.isLogin(!1),setTimeout(function(){e.isTableLoading=!1,e.getUserList(),e.getUserLogList(!0)},500),e.$watch("pageInfo",function(){e.getUserLogList(!0)},{deep:!0})}})})();