(function(){var e,t=utility.getLocalStorage("language"),a=utility.getLocalStorage("userInfo"),i=utility.getLocalStorage("bizParam"),o=new Vue({el:"#js-vue",data:{language:t?t.language:"CN",isTableLoading:!0,isShowModal:!1,isModalLoading:!0,modalTitle:"",isShowMember:!1,isShowFunctions:!1,isUserList:!1,isUserListTree:!1,isFunctionList:!1,isShowDataGroup:!1,isDataGroupList:!1,tableHeight:(e=$(".tableContainer").height(),e-100),groupTypeList:i.groupType,pageInfo:{id:0,count:0,pageNum:1,pageSize:20,roleName:"",companyId:""},index:0,selectItem:null,itemInfo:{id:"",companyId:"",roleName:"",roleCode:"",roleDesc:"",isValid:"",isPublic:"",createUserId:a.id,modifyUserId:a.id},columnsList:[{type:"index",width:60,align:"center"},{title:{CN:"公司名称",EN:"Company Name",TW:"公司名称"}[t.language],key:"companyName"},{title:{CN:"角色编号",EN:"Role Number",TW:"角色編號"}[t.language],key:"roleCode"},{title:{CN:"角色名称",EN:"Role Name",TW:"角色名稱"}[t.language],key:"roleName"},{title:{CN:"公共",EN:"Public",TW:"公共"}[t.language],key:"isPublic"},{title:{CN:"有效",EN:"Effective",TW:"有效"}[t.language],key:"isValid"},{title:{CN:"角色描述",EN:"Role Description",TW:"角色描述"}[t.language],key:"roleDesc"},{title:{CN:"操作",EN:"State",TW:"操作"}[t.language],key:"state",width:350,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.isShowFunctions=!0,o.roleFunctionPageInfo.roleId=o.roleList[a.index].id,o.roleFunctionPageInfo.companyId=o.roleList[a.index].companyId,o.getRoleFunctionsDataList(!0)}}},{CN:"可用功能",EN:"Role Functions",TW:"可用功能"}[t.language]),e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.isShowMember=!0,o.roleMemberPageInfo.roleId=o.roleList[a.index].id,o.roleMemberPageInfo.companyId=o.roleList[a.index].companyId,o.userPageInfo.companyId=o.roleList[a.index].companyId,o.getSuperiorDepartmentList(),o.getRoleMemberList(!0)}}},{CN:"角色成员",EN:"Role Members",TW:"角色成員"}[t.language]),e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.index=a.index,o.selectItem=a.row,o.editItem()}}},{CN:"编辑",EN:"Edite",TW:"編輯"}[t.language]),e("Button",{props:{type:"error",size:"small"},on:{click:function(){o.index=a.index,o.selectItem=a.row,o.delItem()}}},{CN:"删除",EN:"Delete",TW:"刪除"}[t.language])])}}],tableRowList:[],companyList:[],roleList:[],departList:[],roleMemberIndex:0,userType:1,roleMemberPageInfo:{count:0,pageNum:1,pageSize:20,roleId:"",companyId:""},roleMemberItem:{id:"",roleId:"",roleName:"",companyId:"",userId:"",userName:"",createUserId:a.id,modifyUserId:a.id},roleMemberColumsList:[{type:"selection",width:60,align:"center"},{title:{CN:"ID",EN:"ID",TW:"ID"}[t.language],width:60,key:"id"},{title:{CN:"公司名称",EN:"Company Name",TW:"公司名稱"}[t.language],key:"companyName"},{title:{CN:"角色名称",EN:"Role",TW:"角色名稱"}[t.language],key:"roleName"},{title:{CN:"下属姓名",EN:"Subordinate Name",TW:"下屬姓名"}[t.language],key:"userName"}],roleMemberTableRowList:[],selectRoleMember:[],roleMemberList:[],userPageInfo:{count:0,pageNum:1,deptId:[],pageSize:20,companyId:""},userColumnsList:[{type:"selection",width:60,align:"center"},{title:{CN:"ID",EN:"ID",TW:"ID"}[t.language],width:60,key:"userId"},{title:{CN:"姓名",EN:"Name",TW:"姓名"}[t.language],key:"userName"},{title:{CN:"所属公司",EN:"Company",TW:"所屬公司"}[t.language],key:"companyName"},{title:{CN:"所属部门",EN:"Department",TW:"所屬部門"}[t.language],key:"deptName"},{title:{CN:"员工职位",EN:"Position",TW:"員工職位"}[t.language],key:"posiName"}],userTableRowList:[],userList:[],selectUser:[],roleFunctionPageInfo:{count:0,pageNum:1,pageSize:20,roleId:"",companyId:""},roleFunctionIndex:0,roleFunctionItem:{},roleFunctionList:[],selectRoleFunction:[],roleFunctionColumsList:[{type:"selection",width:60,align:"center"},{title:{CN:"ID",EN:"ID",TW:"ID"}[t.language],width:100,key:"id"},{title:{CN:"公司名称",EN:"Company Name",TW:"公司名稱"}[t.language],key:"companyName"},{title:{CN:"角色名称",EN:"Role",TW:"角色名稱"}[t.language],key:"roleName"},{title:{CN:"功能名称",EN:"Functions Name",TW:"功能名稱"}[t.language],key:"functionName"}],roleFunctionTableRowList:[],functionsPageInfo:{count:0,pageNum:1,pageSize:1e3},functionList:[],selectFunction:[],permissionFunctionTypeLis:i.permissionFunctionType,functionsColumnsList:[{type:"selection",width:60,align:"center"},{title:{CN:"ID",EN:"ID",TW:"ID"}[t.language],width:100,key:"id"},{title:{CN:"功能层级",EN:"Functions Name",TW:"功能層級"}[t.language],key:"functionLevel"},{title:{CN:"功能类型",EN:"Functions Type",TW:"功能類型"}[t.language],key:"functionType"},{title:{CN:"功能名称",EN:"Functions Name",TW:"功能名稱"}[t.language],key:"functionName"},{title:{CN:"是否可用",EN:"isValid",TW:"是否可用"}[t.language],key:"isValid"}],functionsTableRowList:[],superiorDepartmentList:[],superiorDepartmentTree:[],roleDataGroupPageInfo:{count:0,pageNum:1,pageSize:20,roleId:"",companyId:"",resName:""},roleDataGroupItem:{id:"",roleId:"",roleName:"",companyId:"",userId:"",userName:"",createUserId:a.id,modifyUserId:a.id},roleDataGroupColumsList:[{type:"selection",width:60,align:"center"},{title:{CN:"ID",EN:"ID",TW:"ID"}[t.language],width:100,key:"id"},{title:{CN:"公司名称",EN:"Company Name",TW:"公司名稱"}[t.language],key:"companyName"},{title:{CN:"角色名称",EN:"Role",TW:"角色名稱"}[t.language],key:"roleName"},{title:{CN:"数据组类型",EN:"DataGroup Type",TW:"數據組類型"}[t.language],key:"resTypeName"},{title:{CN:"数据组名称",EN:"DataGroup Name",TW:"數據組名稱"}[t.language],key:"resName"}],roleDataGroupTableRowList:[],selectRoleDataGroup:[],roleDataGroupList:[],dataGroupPageInfo:{count:0,pageNum:1,deptId:[],pageSize:20,companyId:""},dataGroupColumnsList:[{type:"selection",width:60,align:"center"},{title:{CN:"所在公司",EN:"Company Name",TW:"所在公司"}[t.language],key:"companyName"},{title:{CN:"组名称",EN:"Group Name",TW:"組名稱"}[t.language],key:"groupName"},{title:{CN:"分组类型",EN:"Gruop Type",TW:"分組類型"}[t.language],key:"groupTypeName"},{title:{CN:"组描述",EN:"Role Description",TW:"組描述"}[t.language],key:"groupDesc"},{title:{CN:"是否可用",EN:"Availability",TW:"是否可用"}[t.language],key:"isValid"}],dataGroupTableRowList:[],dataGroupList:[],selectDataGroup:[]},methods:{refresh:function(){var e=this;window.location.href=window.location.href,0==e.isTableLoading&&(e.isTableLoading=!0,setTimeout(function(){e.isTableLoading=!1},3e3))},addItem:function(){var e=this;e.isShowModal=!0,e.isModalLoading=!0,e.modalTitle={CN:"新增",EN:"Add",TW:"新增"}[e.language],e.itemInfo={id:"",companyId:"",roleName:"",roleCode:"",roleDesc:"",isValid:"",isPublic:"",createUserId:a.id,modifyUserId:a.id}},editItem:function(){var e=this;utility.showMessageTip(e,function(){e.itemInfo=e.roleList[e.index],e.isShowModal=!0,e.modalTitle={CN:"修改",EN:"Edit",TW:"修改"}[e.language]})},delItem:function(){var e=this;e.$Modal.confirm({title:"确定删除？",width:200,onOk:function(){e.itemInfo=e.roleList[e.index],utility.showMessageTip(e,function(){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.permissionService+"?action="+CONFIG.ACTION.delRole,actionUrl:CONFIG.SERVICE.permissionService,dataObj:{ids:e.itemInfo.id,modifyUserId:a.id},beforeSendCallback:function(){e.isTableLoading=!0},completeCallback:function(){e.isTableLoading=!1},successCallback:function(t){200==t.code?e.getRoleDataList(!0):e.$Message.error(t.message)}})})}})},setCurrentRowData:function(e,t){var a=this;e&&(a.index=t,a.selectItem=e)},pageSizeChange:function(e){var t=this;t.pageInfo.pageNum=parseInt(e,10),setTimeout(function(){t.getRoleDataList(!1)},200)},pageRowChange:function(e){var t=this;t.pageInfo.pageSize=parseInt(e,10),setTimeout(function(){t.getRoleDataList(!1)},200)},showUserLayer:function(e){var t=this;t[e]=!0,"isUserList"==e?(t.getUserList(!0),t.userType=1):"isUserListTree"==e&&(t.userType=2)},formatRoleMember:function(){for(var e=this,t=0,a=e.roleMemberList.length;t<a;t++)e.roleMemberTableRowList.push({id:decodeURI(e.roleMemberList[t].id),roleName:decodeURI(e.roleMemberList[t].roleName),companyName:decodeURI(e.roleMemberList[t].companyName),userName:decodeURI(e.roleMemberList[t].userName)})},getRoleMemberList:function(e){var t=this;t.roleMemberTableRowList=[],1==e&&(t.roleMemberPageInfo.pageNum=1),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.permissionService+"?action="+CONFIG.ACTION.getRoleUserList,actionUrl:CONFIG.SERVICE.permissionService,dataObj:t.roleMemberPageInfo,beforeSendCallback:function(){t.isTableLoading=!0},completeCallback:function(){t.isTableLoading=!1},successCallback:function(e){200==e.code?(t.roleMemberList=e.data,t.roleMemberPageInfo.count=e.count,t.formatRoleMember()):t.$Message.error(e.message)}})},deleteRoleMember:function(){var e=this;0!=e.selectRoleMember.length?(e.isModalLoading=!0,utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.permissionService+"?action="+CONFIG.ACTION.delRoleUser,actionUrl:CONFIG.SERVICE.permissionService,dataObj:{ids:e.selectRoleMember.join(","),modifyUserId:a.id},beforeSendCallback:function(){e.isTableLoading=!0},completeCallback:function(){e.isTableLoading=!1},successCallback:function(t){200==t.code?e.getRoleMemberList(!0):e.$Message.error(t.message)}})):e.$Message.error({content:{CN:"请选择一条数据",EN:"Please select a data",TW:"請選擇一條數據"}[e.language],top:200,duration:3})},roleMemberPageSizeChange:function(e){var t=this;t.roleMemberPageInfo.pageNum=parseInt(e,10),setTimeout(function(){t.getRoleMemberList(!1)},200)},roleMemberPageRowChange:function(e){var t=this;t.roleMemberPageInfo.pageSize=parseInt(e,10),setTimeout(function(){t.getRoleMemberList(!1)},200)},userPageSizeChange:function(e){var t=this;t.userPageInfo.pageNum=parseInt(e,10),setTimeout(function(){t.getUserList(!1)},200)},userPageRowChange:function(e){var t=this;t.userPageInfo.pageSize=parseInt(e,10),setTimeout(function(){t.getUserList(!1)},200)},selectMembers:function(){var e=this;utility.showMessageTip(e,function(){e.isShowMember=!0})},companyChange:function(){},selectMemberChange:function(e){for(var t=this,a=[],i=0,o=e.length;i<o;i++)a.push(e[i].id);t.selectRoleMember=a},uploadDataToServer:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.permissionService+"?action="+CONFIG.ACTION.saveRole,actionUrl:CONFIG.SERVICE.permissionService,dataObj:{id:e.itemInfo.id,companyId:e.itemInfo.companyId,roleName:encodeURI(e.itemInfo.roleName),roleCode:encodeURI(e.itemInfo.roleCode),roleDesc:encodeURI(e.itemInfo.roleDesc),isValid:e.itemInfo.isValid,isPublic:e.itemInfo.isPublic,createUserId:a.id,modifyUserId:a.id},completeCallback:function(){e.isModalLoading=!1},successCallback:function(t){200==t.code?(e.getRoleDataList(!0),e.isShowModal=!1):e.$Message.error(t.message)}})},formatRoleTableList:function(){for(var e=this,t=0,a=e.roleList.length;t<a;t++)e.tableRowList.push({roleName:decodeURI(e.roleList[t].roleName),companyName:decodeURI(e.roleList[t].companyName),roleCode:e.roleList[t].roleCode,roleDesc:decodeURI(e.roleList[t].roleDesc),isValid:{1:{CN:"是",EN:"Yes",TW:"是"}[e.language],0:{CN:"否",EN:"No",TW:"否"}[e.language]}[e.roleList[t].isValid+""],isPublic:{1:{CN:"是",EN:"Yes",TW:"是"}[e.language],0:{CN:"否",EN:"No",TW:"否"}[e.language]}[e.roleList[t].isPublic+""]})},addRoleMember:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.permissionService+"?action="+CONFIG.ACTION.saveRoleUser,actionUrl:CONFIG.SERVICE.permissionService,dataObj:{roleId:e.roleMemberPageInfo.roleId,companyId:e.roleMemberPageInfo.companyId,userIds:e.selectUser.join(","),userType:e.userType,createUserId:a.id,modifyUserId:a.id},completeCallback:function(){e.isModalLoading=!1},successCallback:function(t){200==t.code?(e.getRoleMemberList(!0),e.isUserList=!1,e.isUserListTree=!1):e.$Message.error(t.message)}})},getRoleDataList:function(e){var t=this;t.tableRowList=[],1==e&&(t.pageInfo.pageNum=1),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.permissionService+"?action="+CONFIG.ACTION.getRoleList,actionUrl:CONFIG.SERVICE.permissionService,dataObj:t.pageInfo,beforeSendCallback:function(){t.isTableLoading=!0},completeCallback:function(){t.isTableLoading=!1},successCallback:function(e){200==e.code?(t.roleList=e.data,t.pageInfo.count=e.count,t.formatRoleTableList()):t.$Message.error(e.message)}})},getCompanyList:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.companyService+"?action="+CONFIG.ACTION.getCompanyList,actionUrl:CONFIG.SERVICE.companyService,dataObj:{id:0,pageSize:1e4},successCallback:function(t){200==t.code&&(e.companyList=t.data)}})},selectUserChange:function(e){for(var t=this,a=[],i=0,o=e.length;i<o;i++)a.push(e[i].userId);t.selectUser=a},selectDepartmentTreeChange:function(e){for(var t=this,a=[],i=0,o=e.length;i<o;i++)a.push(e[i].id);t.selectUser=a},getUserListByDept:function(e,t){var a=this;a.userPageInfo.deptId=e,a.getUserList(!0)},formatUserData:function(){for(var e=this,t=0,a=e.userList.length;t<a;t++)e.userTableRowList.push({userId:e.userList[t].userId,userName:decodeURI(e.userList[t].userName),deptName:decodeURI(e.userList[t].deptName),posiName:decodeURI(e.userList[t].posiName),companyName:decodeURI(e.userList[t].companyName)})},getUserList:function(e){var t=this;t.userTableRowList=[],1==e&&(t.userPageInfo.pageNum=1),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.deptUserService+"?action="+CONFIG.ACTION.getDeptUserList,actionUrl:CONFIG.SERVICE.deptUserService,dataObj:{pageSize:20,pageNum:t.userPageInfo.pageNum,deptId:t.userPageInfo.deptId[t.userPageInfo.deptId.length-1]},beforeSendCallback:function(){t.isTableLoading=!0},completeCallback:function(){t.isTableLoading=!1},successCallback:function(e){200==e.code?(t.userList=e.data,t.userPageInfo.count=e.count,t.formatUserData()):t.$Message.error(e.message)}})},roleFunctionsPageSizeChange:function(e){var t=this;t.roleFunctionPageInfo.pageNum=parseInt(e,10),setTimeout(function(){t.getRoleFunctionsDataList(!1)},200)},roleFunctionsPageRowChange:function(e){var t=this;t.roleFunctionPageInfo.pageSize=parseInt(e,10),setTimeout(function(){t.getRoleFunctionsDataList(!1)},200)},deleteRoleFunctions:function(){var e=this;0!=e.selectRoleFunction.length?(e.isModalLoading=!0,utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.permissionService+"?action="+CONFIG.ACTION.delRoleFunction,actionUrl:CONFIG.SERVICE.permissionService,dataObj:{ids:e.selectRoleFunction.join(","),modifyUserId:a.id},beforeSendCallback:function(){e.isTableLoading=!0},completeCallback:function(){e.isTableLoading=!1},successCallback:function(t){200==t.code?e.getRoleFunctionsDataList(!0):e.$Message.error(t.message)}})):e.$Message.error({content:{CN:"请选择一条数据",EN:"Please select a data",TW:"請選擇一條數據"}[e.language],top:200,duration:3})},selectRoleFunctionsChange:function(e){for(var t=this,a=[],i=0,o=e.length;i<o;i++)a.push(e[i].id);t.selectRoleFunction=a},uploadFunctionDataToServer:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.permissionService+"?action="+CONFIG.ACTION.saveRoleFunction,actionUrl:CONFIG.SERVICE.permissionService,dataObj:{roleId:e.roleFunctionPageInfo.roleId,companyId:e.roleFunctionPageInfo.companyId,functionIds:e.selectFunction.join(","),createUserId:a.id,modifyUserId:a.id},completeCallback:function(){e.isModalLoading=!1},successCallback:function(t){200==t.code?(e.getRoleFunctionsDataList(!0),e.isFunctionList=!1):e.$Message.error(t.message)}})},formatRoleFunction:function(){for(var e=this,t=0,a=e.roleFunctionList.length;t<a;t++)e.roleFunctionTableRowList.push({id:e.roleFunctionList[t].id,roleName:decodeURI(e.roleFunctionList[t].roleName),companyName:decodeURI(e.roleFunctionList[t].companyName),functionName:decodeURI(e.roleFunctionList[t].functionName)})},getRoleFunctionsDataList:function(e){var t=this;t.roleFunctionList=[],t.roleFunctionTableRowList=[],1==e&&(t.roleFunctionPageInfo.pageNum=1),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.permissionService+"?action="+CONFIG.ACTION.getRoleFunctionList,actionUrl:CONFIG.SERVICE.permissionService,dataObj:t.roleFunctionPageInfo,beforeSendCallback:function(){t.isTableLoading=!0},completeCallback:function(){t.isTableLoading=!1},successCallback:function(e){200==e.code?(t.roleFunctionList=e.data,t.roleFunctionPageInfo.count=e.count,t.formatRoleFunction()):t.$Message.error(e.message)}})},showFunctionsLayer:function(){var e=this;e.isFunctionList=!0,e.getFunctionsDataList(!0)},getSuper:function(e,t){for(var a=this,i=0,o=e.length;i<o;i++){if(e[i].id==t){a.selectFunction.push(t),e[i].checked=!0;break}a.getSuper(e[i].children,t)}},setChecked:function(){for(var e=this,t=0,a=e.roleFunctionList.length;t<a;t++)e.getSuper(e.functionsTableRowList,e.roleFunctionList[t].functionId)},selectFunctionsChange:function(e){for(var t=this,a=[],i=0,o=e.length;i<o;i++)a.push(e[i].id);t.selectFunction=a},formatFunctions:function(){var e=this,t=JSON.stringify(e.functionList).replace(/(subFunctionList)/g,"children").replace(/(functionName)/g,"title").replace(/isValid/g,"expand");e.functionsTableRowList=JSON.parse(t),e.setChecked()},getFunctionsDataList:function(e){var t=this;t.functionList=[],t.functionsTableRowList=[],1==e&&(t.functionsPageInfo.pageNum=1),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.permissionService+"?action="+CONFIG.ACTION.getFunctionTreeList,actionUrl:CONFIG.SERVICE.permissionService,dataObj:t.functionsPageInfo,beforeSendCallback:function(){t.isTableLoading=!0},completeCallback:function(){t.isTableLoading=!1},successCallback:function(e){200==e.code?(t.functionList=e.data,t.functionsPageInfo.count=e.count,t.formatFunctions()):t.$Message.error(e.message)}})},functionsPageSizeChange:function(e){var t=this;t.functionsPageInfo.pageNum=parseInt(e,10),setTimeout(function(){t.getFunctionsDataList(!1)},200)},functionsPageRowChange:function(e){var t=this;t.functionsPageInfo.pageSize=parseInt(e,10),setTimeout(function(){t.getFunctionsDataList(!1)},200)},formatSuperiorDeprt:function(e){var t=this,a=JSON.stringify(e).replace(/id/g,"value").replace(/deptName/g,"label").replace(/subDeptList/g,"children"),i=JSON.stringify(e).replace(/deptName/g,"title").replace(/subDeptList/g,"children");t.superiorDepartmentList=JSON.parse(a),t.superiorDepartmentTree=JSON.parse(i)},getSuperiorDepartmentList:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.deptService+"?action="+CONFIG.ACTION.getDeptTreeList,actionUrl:CONFIG.SERVICE.deptService,dataObj:{pageNum:1,pageSize:1e4,companyId:e.userPageInfo.companyId},beforeSendCallback:function(){e.isTableLoading=!0},completeCallback:function(){e.isTableLoading=!1},successCallback:function(t){200==t.code&&(e.superiorDepartmentList=[],e.formatSuperiorDeprt(t.data))}})},getRoleDataGroupList:function(e){var t=this;t.roleDataGroupList=[],1==e&&(t.roleDataGroupPageInfo.pageNum=1),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.permissionService+"?action="+CONFIG.ACTION.getUserGroupDataResList,actionUrl:CONFIG.SERVICE.permissionService,dataObj:t.roleDataGroupPageInfo,beforeSendCallback:function(){t.isTableLoading=!0},completeCallback:function(){t.isTableLoading=!1},successCallback:function(e){200==e.code?(t.roleDataGroupPageInfo.count=e.count,t.roleDataGroupTableRowList=e.data):t.$Message.error(e.message)}})},roleDataGroupPageSizeChange:function(e){var t=this;t.roleDataGroupPageInfo.pageNum=parseInt(e,10),setTimeout(function(){t.getRoleDataGroupList(!1)},200)},roleDataGroupPageRowChange:function(e){var t=this;t.roleDataGroupPageInfo.pageSize=parseInt(e,10),setTimeout(function(){t.getRoleDataGroupList(!1)},200)},selectRoleDataGroupChange:function(e){for(var t=this,a=[],i=0,o=e.length;i<o;i++)a.push(e[i].id);t.selectRoleDataGroup=a},deleteRoleDataGroup:function(){var e=this;0!=e.selectRoleDataGroup.length?(e.isModalLoading=!0,utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.permissionService+"?action="+CONFIG.ACTION.delUserGroupDataResList,actionUrl:CONFIG.SERVICE.permissionService,dataObj:{ids:e.selectRoleDataGroup.join(","),modifyUserId:a.id},beforeSendCallback:function(){e.isTableLoading=!0},completeCallback:function(){e.isTableLoading=!1},successCallback:function(t){200==t.code?e.getRoleDataGroupList(!0):e.$Message.error(t.message)}})):e.$Message.error({content:{CN:"请选择一条数据",EN:"Please select a data",TW:"請選擇一條數據"}[e.language],top:200,duration:3})},showDataGroupLayer:function(){var e=this;e.isDataGroupList=!0,e.getDataGroupList(!0)},getDataGroupList:function(e){var t=this;t.roleDataGroupList=[],1==e&&(t.dataGroupPageInfo.pageNum=1),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.groupService+"?action="+CONFIG.ACTION.getGroupList,actionUrl:CONFIG.SERVICE.groupService,dataObj:{pageNum:t.dataGroupPageInfo.pageNum,pageSize:t.dataGroupPageInfo.pageSize,companyId:t.roleDataGroupPageInfo.companyId},beforeSendCallback:function(){t.isTableLoading=!0},completeCallback:function(){t.isTableLoading=!1},successCallback:function(e){200==e.code?(t.dataGroupPageInfo.count=e.count,t.dataGroupTableRowList=e.data):t.$Message.error(e.message)}})},dataGroupPageSizeChange:function(e){var t=this;t.dataGroupPageInfo.pageNum=parseInt(e,10),setTimeout(function(){t.getDataGroupList(!1)},200)},dataGroupPageRowChange:function(e){var t=this;t.dataGroupPageInfo.pageSize=parseInt(e,10),setTimeout(function(){t.getDataGroupList(!1)},200)},selectDataGroupChange:function(e){for(var t=this,a=[],i=0,o=e.length;i<o;i++)a.push(e[i].id);t.selectDataGroup=a},addRoleDataGroup:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.permissionService+"?action="+CONFIG.ACTION.saveUserGroupDataRes,actionUrl:CONFIG.SERVICE.permissionService,dataObj:{roleId:e.roleDataGroupPageInfo.roleId,companyId:e.roleDataGroupPageInfo.companyId,resIds:e.selectDataGroup.join(","),createUserId:a.id,modifyUserId:a.id},completeCallback:function(){e.isModalLoading=!1},successCallback:function(t){200==t.code?(e.getRoleDataGroupList(!0),e.isDataGroupList=!1):e.$Message.error(t.message)}})}},created:function(){var e=this;utility.isLogin(!1),setTimeout(function(){e.getRoleDataList(!0),e.getCompanyList()},500)}})})();