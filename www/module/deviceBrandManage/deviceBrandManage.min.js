(function(){var e,a=utility.getLocalStorage("language"),t=utility.getLocalStorage("userInfo"),i=(utility.getLocalStorage("bizParam"),new Vue({el:"#js-vue",data:{language:a?a.language:"CN",isTableLoading:!0,isShowModal:!1,isShowBandTypeModal:!1,isShowDetail:!1,isModalLoading:!0,isBandTypeTableLoading:!1,isBandType:!1,modalTitle:"",tableHeight:(e=$(".tableContainer").height(),e-100),count:0,pageInfo:{companyId:"",name:"",type:"",cateCode:"vehicleBrand"},page:{count:0,pageSize:20,pageNum:0},bandTypepage:{count:0,pageSize:20,pageNum:0},index:0,selectItem:"",itemInfo:{id:"",createUserId:t.id,modifyUserId:t.id,companyId:"",name:"",type:"",cateCode:"vehicleBrand"},bandTypeItemInfo:{id:"",createUserId:t.id,modifyUserId:t.id,vehicleModelName:""},columnsList:[{type:"index",width:60,align:"center",title:"序号"},{title:{CN:"公司",EN:"Company name",TW:"公司名稱"}[a.language],key:"companyName",width:280},{title:"品牌编号",key:"type"},{title:"品牌名称",key:"name",width:280},{title:"创建时间",key:"createTime"},{title:{CN:"操作",EN:"Operation",TW:"操作"}[a.language],key:"operation",align:"center",width:180,render:function(e,t){return e("div",[e("Button",{props:{type:"info",size:"small"},style:{marginRight:"5px"},on:{click:function(){i.index=t.index,i.selectItem=t.row,i.isBandType=!0,i.getVehicleModelList(!0)}}},{CN:"品牌型号",EN:"Edite",TW:"編輯"}[a.language]),e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){i.index=t.index,i.selectItem=t.row,i.editItem()}}},{CN:"编辑",EN:"Edite",TW:"編輯"}[a.language]),e("Button",{props:{type:"error",size:"small"},on:{click:function(){i.index=t.index,i.selectItem=t.row,i.delItem()}}},{CN:"删除",EN:"Delete",TW:"刪除"}[a.language])])}}],companyList:[],tableRowList:[],columnsBandTypeList:[{type:"index",width:60,align:"center",title:"序号"},{title:"品牌型号名称",key:"vehicleModelName"},{title:"创建用户",key:"createUserName"},{title:"创建时间",key:"createTime"},{title:"操作",key:"operation",align:"center",width:120,render:function(e,t){return e("div",[e("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){i.index=t.index,i.bandTypeItemInfo=t.row,i.isShowBandTypeModal=!0}}},{CN:"编辑",EN:"Edite",TW:"編輯"}[a.language]),e("Button",{props:{type:"error",size:"small"},on:{click:function(){i.index=t.index,i.bandTypeItemInfo=t.row,i.delBandTypeItem()}}},{CN:"删除",EN:"Delete",TW:"刪除"}[a.language])])}}],tableBandTypeRowList:[]},methods:{refresh:function(){var e=this;window.location.href=window.location.href,0==e.isTableLoading&&(e.isTableLoading=!0,setTimeout(function(){e.isTableLoading=!1},3e3))},addItem:function(){var e=this;e.isShowModal=!0,e.isModalLoading=!0,e.modalTitle={CN:"新增",EN:"Add",TW:"新增"}[e.language],e.itemInfo={id:"",createUserId:t.id,modifyUserId:t.id,companyId:"",name:"",type:"",cateCode:"vehicleBrand"}},addBandTypeItem:function(){var e=this;e.isShowBandTypeModal=!0,e.bandTypeItemInfo={id:"",createUserId:t.id,modifyUserId:t.id,vehicleModelName:""}},delBandTypeItem:function(){var e=this;e.$Modal.confirm({title:"确定删除？",width:200,onOk:function(){utility.showMessageTip(e,function(){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.vehicleModelService+"?action="+CONFIG.ACTION.delVehicleModel,dataObj:{ids:e.bandTypeItemInfo.id,modifyUserId:t.id},actionUrl:CONFIG.SERVICE.vehicleModelService,beforeSendCallback:function(){e.isBandTypeTableLoading=!0},completeCallback:function(){e.isBandTypeTableLoading=!1},successCallback:function(a){200==a.code?e.getVehicleModelList(!0):e.$Message.error(a.message)}})})}})},editItem:function(){var e=this;utility.showMessageTip(e,function(){e.itemInfo=e.tableRowList[e.index],e.isShowModal=!0,e.modalTitle={CN:"修改",EN:"Edit",TW:"修改"}[e.language]})},showDetail:function(){var e=this;utility.showMessageTip(e,function(){e.itemInfo=JSON.parse(JSON.stringify(e.tableRowList[e.index])),e.isShowDetail=!0})},delItem:function(){var e=this;e.$Modal.confirm({title:"确定删除？",width:200,onOk:function(){e.itemInfo=e.tableRowList[e.index],utility.showMessageTip(e,function(){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.sysParaService+"?action="+CONFIG.ACTION.delSysPara,dataObj:{ids:e.itemInfo.id,modifyUserId:t.id},actionUrl:CONFIG.SERVICE.sysParaService,beforeSendCallback:function(){e.isTableLoading=!0},completeCallback:function(){e.isTableLoading=!1},successCallback:function(a){200==a.code?(e.getBizParam(),e.getSysParaList(!0)):e.$Message.error(a.message)}})})}})},setCurrentRowData:function(e,a){var t=this;e&&(t.index=a,t.selectItem=e)},uploadBandTypeToServer:function(){var e=this;if(utility.checkLen(e.bandTypeItemInfo.vehicleModelName,0))return e.$Message.error("请输入品牌型号"),void(e.isModalLoading=!1);utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.vehicleModelService+"?action="+CONFIG.ACTION.saveVehicleModel,actionUrl:CONFIG.SERVICE.vehicleModelService,dataObj:{id:e.bandTypeItemInfo.id,createUserId:t.id,modifyUserId:t.id,companyId:e.selectItem.companyId,vehicleBrandId:e.selectItem.id,vehicleModelName:encodeURI(e.bandTypeItemInfo.vehicleModelName)},completeCallback:function(){e.isModalLoading=!1},successCallback:function(a){200==a.code?(e.isShowBandTypeModal=!1,e.getVehicleModelList(!0)):e.$Message.error(a.message)}})},uploadDataToServer:function(){var e=this;return utility.checkLen(e.itemInfo.companyId,0)?(e.$Message.error("请选择公司"),void(e.isModalLoading=!1)):utility.checkLen(e.itemInfo.type,0)?(e.$Message.error("请填写编码"),void(e.isModalLoading=!1)):utility.checkLen(e.itemInfo.name,0)?(e.$Message.error("请填写名称"),void(e.isModalLoading=!1)):utility.checkIsNum(e.itemInfo.type)?void utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.sysParaService+"?action="+CONFIG.ACTION.saveSysPara,actionUrl:CONFIG.SERVICE.sysParaService,dataObj:{id:e.itemInfo.id,createUserId:t.id,modifyUserId:t.id,companyId:encodeURI(e.itemInfo.companyId),name:encodeURI(e.itemInfo.name),type:encodeURI(e.itemInfo.type),cateCode:"vehicleBrand"},completeCallback:function(){e.isModalLoading=!1},successCallback:function(a){200==a.code?(e.getBizParam(),e.getSysParaList(!0),e.isShowModal=!1):e.$Message.error(a.message)}}):(e.$Message.error("编码只能是数字"),void(e.isModalLoading=!1))},pageSizeChange:function(e){var a=this;a.page.pageNum=parseInt(e,10),setTimeout(function(){a.getSysParaList(!1)},200)},pageRowChange:function(e){var a=this;a.page.pageSize=parseInt(e,10),setTimeout(function(){a.getSysParaList(!0)},200)},pageSizeBandTypeChange:function(e){var a=this;a.bandTypepage.pageNum=parseInt(e,10),setTimeout(function(){a.getVehicleModelList(!1)},200)},pageRowBandTypeChange:function(e){var a=this;a.bandTypepage.pageSize=parseInt(e,10),setTimeout(function(){a.getVehicleModelList(!0)},200)},getVehicleModelList:function(e){var a=this;a.tableBandTypeRowList=[],1==e&&(a.bandTypepage.pageNum=1),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.vehicleModelService+"?action="+CONFIG.ACTION.getVehicleModelList,actionUrl:CONFIG.SERVICE.vehicleModelService,dataObj:{pageNum:a.bandTypepage.pageNum,pageSize:a.bandTypepage.pageSize,companyId:a.selectItem.companyId,vehicleBrandId:a.selectItem.id},beforeSendCallback:function(){a.isBandTypeTableLoading=!0},completeCallback:function(){a.isBandTypeTableLoading=!1},successCallback:function(e){200==e.code&&(a.tableBandTypeRowList=e.data,a.bandTypepage.count=e.count)}})},getSysParaList:function(e){var a=this;a.tableRowList=[],a.tableRowList=[],1==e&&(a.page.pageNum=1),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.sysParaService+"?action="+CONFIG.ACTION.getSysParaList,actionUrl:CONFIG.SERVICE.sysParaService,dataObj:{pageNum:a.page.pageNum,pageSize:a.page.pageSize,companyId:a.pageInfo.companyId,name:encodeURI(a.pageInfo.name),type:encodeURI(a.pageInfo.type),cateCode:"vehicleBrand"},beforeSendCallback:function(){},completeCallback:function(){a.isTableLoading=!1},successCallback:function(e){200==e.code&&(a.tableRowList=e.data,a.page.count=e.count)}})},setAllInfo:function(){for(var e=this,a=[{type:321,name:"HELI"},{type:323,name:"威海广泰空港设备股份有限公司"},{type:324,name:"无锡锡梅特种汽车有限公司"},{type:325,name:"日产"},{type:326,name:"江苏航泰"},{type:327,name:"加拿大 TLD"},{type:328,name:"民航协发机场设备有限公司"},{type:329,name:"江苏靖江"},{type:330,name:"北京贝亦德技术开发有限公司"},{type:401,name:"德国翠普机场有限公司"},{type:402,name:"中集埃马瑞有限公司（法国）"},{type:403,name:"卓缤科技贸易（上海）有限公司（JBT)"},{type:404,name:"北京捷新"},{type:405,name:"上海众铃汽车销售服务有限公司"},{type:406,name:"江苏天一机场专用设备股份有限公司"},{type:407,name:"腾达航勤设备（上海）有限公司"},{type:408,name:"深圳市达航投资发展有限公司"},{type:409,name:"无锡蓝航空港设备有限公司"},{type:410,name:"上海苏靖叉车有限公司"}],i=0,n=e.companyList.length;i<n;i++)(function(i){console.log(e.companyList[i].id+"_"+e.companyList[i].companyName);for(var n=0,o=a.length;n<o;n++)console.log(a[n].type+"-"+a[n].name),function(n){e.itemInfo={id:"",createUserId:t.id,modifyUserId:t.id,companyId:e.companyList[i].id,name:a[n].name,type:a[n].type,cateCode:"vehicleBrand"},e.uploadDataToServer()}(n)})(i)},getCompanyList:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.companyService+"?action="+CONFIG.ACTION.getCompanyList,actionUrl:CONFIG.SERVICE.companyService,dataObj:{id:0,pageSize:1e4},successCallback:function(a){200==a.code&&(e.companyList=a.data,e.setAllInfo())}})},getBizParam:function(){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.commonService+"?action="+CONFIG.ACTION.getBizParam,actionUrl:CONFIG.SERVICE.commonService,dataObj:{companyId:t.companyId},successCallback:function(e){200==e.code&&utility.setLocalStorage("bizParam",e.data)}})}},created:function(){var e=this;utility.isLogin(!1),setTimeout(function(){e.getCompanyList(),e.getSysParaList(!0),e.$watch("pageInfo",function(){e.tableRowList=[],e.getSysParaList(!0)},{deep:!0})},500)}}))})();