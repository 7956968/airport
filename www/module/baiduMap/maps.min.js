(function(){var e,a=utility.getLocalStorage("language"),i=utility.getLocalStorage("airPort"),t=utility.getLocalStorage("userInfo"),n=utility.getLocalStorage("bizParam"),o=utility.getLocalStorage("userFuncList"),r=function(){var e={isViewVideo:!1,isSearch:!1,isTrack:!1};for(var a in o)if(o.hasOwnProperty(a))for(var i=0,t=o[a].length;i<t;i++)"device_manage_view_video"==o[a][i].functionCode&&(e.isViewVideo=!0),"map_query_live_vehicle"==o[a][i].functionCode&&(e.isSearch=!0),"map_view_track"==o[a][i].functionCode&&(e.isTrack=!0),"device_manage_secure_area"==o[a][i].functionCode&&(e.isDefense=!0),"device_manage_camera"==o[a][i].functionCode&&(e.isCamera=!0);return e}();Vue.use(VueBaiduMap.default,{ak:"eCaU3zoABU2Ggtuc8vAoTrkc"}),window.pageVue=new Vue({el:"#js-vue",components:{"bml-marker-clusterer":VueBaiduMap.BmlMarkerClusterer},data:{functionInfo:r,isShenZhen:!1,deleteLoading:!1,addLoading:!1,language:a?a.language:"CN",airPort:i?[parseFloat(i.airPort.split(",")[0],10),parseFloat(i.airPort.split(",")[1],10)]:[113.8077,22.6286],companyList:[],departmentList:[],userFuncList:o,searchId:"",searchCode:"",openInfoWidth:0,openInfoHeight:0,baiduMapInfo:{BMap:null,map:null,mapType:"BMAP_NORMAL_MAP",center:{lng:0,lat:0},zoom:18,overviewMapControl:null,speed:90,vehicleMarkers:{},markerClusterer:null,openInfoWindow:{type:"",show:!1,show:!1,position:{lng:0,lat:0}},animationInfo:{timeInterval:null,coordinates:[],trajectoryInfo:[],curveInfo:[],pointInfo:[],moveVehicle:null,speed:90,trajectoryItem:{time:"",speed:"",coordinate:[],position:{lng:0,lat:0},vehicleCode:"",companyName:"",deptName:"",vehicleName:"",licenseNumber:"",lastGpsTime:"",vehicleTypeName:"",address:""}},camera:{},cameraClusterer:null,cameraMarkers:[],defensList:{},defensPath:[],isCloseDefensPath:!1,defensPathEdit:!0,layersInfo:{isSeat:!0,isAlarm:!0,isVehicle:!0,isDefense:!0,isCamera:!0}},modal:{isLayer:!1,isAlarm:!1,isCamera:!1,isSearch:!1,isVehicle:!1,isHistory:!1,isDefense:!1},layerControl:["seat","alarm","vehicle","defens","camera"],vehiclePageInfo:{id:"",count:0,pageNum:1,deptId:"",pageSize:15,vehicleName:"",vehicleCode:"",gpsDeviceCode:""},vehiclePositonPageInfo:{span:1e3,count:0,pageNum:1,deptId:"",pageSize:15,companyId:"",id:"",vehicleName:"",vehicleCode:"",licenseNumber:"",gpsDeviceCode:"",vehicleTypeId:"",vehicleStatus:"",useStatus:-1,vehicleColorId:"",vehicleBrandId:"",centerPosition:""},vehicleItem:{id:"",speed:"",power:"",deptId:"",deptName:"",modifyTime:"",gpsDeviceId:"",companyName:"",vehicleName:"",vehicleCode:"",lastPosition:"",vehicleTypeId:"",gpsDeviceCode:"",vehicleStatus:"",vehicleColorId:"",vehicleBrandId:"",vehicleStatusName:""},vehicleItemPop:null,vehicleList:[],isAddVehiclePosition:!1,isDbClickSearch:!1,terminalStatusList:n.terminalStatus,vehicleColorList:n.vehicleColor,vehicleTypeList:n.vehicleType,vehicleBrandList:n.vehicleBrand,secureAreaLimitTypeList:n.secureAreaLimitType,vehicleColumns:[{title:{CN:"名称",EN:"Name",TW:"名稱"}[a.language],key:"vehicleName"},{title:{CN:"类型",EN:"Type",TW:"類型"}[a.language],key:"vehicleTypeId"},{title:{CN:"编码",EN:"Code",TW:"編碼"}[a.language],key:"vehicleCode"},{title:{CN:"状态",EN:"State",TW:"狀態"}[a.language],key:"vehicleStatus"}],vehicleDatas:[],vehiclePositionItem:{o:"",id:"",speed:"",power:"",deptId:"",deptName:"",modifyTime:"",gpsDeviceId:"",companyName:"",vehicleName:"",vehicleCode:"",lastPosition:"",vehicleTypeId:"",gpsDeviceCode:"",vehicleStatus:"",vehicleColorId:"",vehicleBrandId:"",vehicleStatusName:""},vehiclePositionList:[],singleVehiclePageInfo:{date:new Date,endTime:"",id:"",beginTime:"",lastGpsTime:"",vehicleCode:"",licenseNumber:"",gpsDeviceCode:""},vehicleAddressDetail:"",trackItem:{coordinate:[],licenseNumber:""},isTrackItem:!1,dateTimeInfo:{date:new Date,beginDate:(e=utility.getDateDetailInfo(),e.year+"-"+e.month+"-"+e.date),endDate:function(){var e=utility.getDateDetailInfo();return e.year+"-"+e.month+"-"+e.date}(),beginTime:"00:00:00",endTime:"23:59:59"},singleVehicleItem:{},historyColumns:[],historyDatas:[],isAddDefensAction:!1,isAddDefensDetailInfo:!1,isDrawDefening:!1,isDeleteDefens:!1,secureAreaStatusList:n.secureAreaStatus,defensPageInfo:{count:0,pageNum:1,pageSize:15,areaName:"",companyId:"",secureStatus:""},defensAreaDetailInfo:{id:"",opType:1,companyId:"",deptId:"",deptIds:[],areaName:"",areaCode:"",secureStatus:"",areaRangeStr:"",speedLimit:"",staySecond:"",canEnter:"",canExit:"",canStay:"",remark:"",createUserId:t.id,modifyUserId:t.id},defensColumns:[{title:{CN:"名称",EN:"Name",TW:"名稱"}[a.language],key:"areaName",fixed:"left",width:120},{title:{CN:"编码",EN:"Code",TW:"編碼"}[a.language],key:"areaCode",width:120},{title:{CN:"状态",EN:"Status",TW:"狀態"}[a.language],key:"secureStatus",width:120},{title:{CN:"速度上限",EN:"Speed Limit",TW:"速度上限"}[a.language],key:"speedLimit",width:120},{title:{CN:"停留时长",EN:"Length Of Stay",TW:"停留時長"}[a.language],key:"staySecond",width:120},{title:{CN:"操作",EN:"Operation",TW:"操作"}[a.language],key:"operation",fixed:"right",width:80,render:function(e,i){var t=JSON.stringify(o.menu_map),n="";return n=-1!=t.indexOf("device_manage_secure_area")?{CN:"删除",EN:"Delete",TW:"删除"}[a.language]:{CN:"查看",EN:"View",TW:"查看"}[a.language],e("div",[e("Button",{props:{type:"error",size:"small"},on:{click:function(){console.log("111"),setTimeout(function(){pageVue.deleteDefensArea()},500)}}},n)])}}],defensDatas:[],defensList:[],defensColor:{_701:{fill:"rgb(4, 159, 228)",stroke:"rgb(33, 121, 160)"},_702:{fill:"rgb(255, 0, 0)",stroke:"rgba(5, 174, 253)"},_703:{fill:"rgb(255, 173, 51)",stroke:"rgba(99, 71, 31)"},_704:{fill:"rgb(180, 191, 195)",stroke:"rgba(122, 150, 162)"}},isAddCameraAction:!1,isAddcameraDetailInfo:!1,isDeleteCamera:!1,monitorStatusList:n.monitorStatusId,cameraPageInfo:{count:0,pageNum:1,pageSize:15,monitorStatus:""},cameraDetailInfo:{id:"",companyId:"",companyName:"",deptId:"",deptIds:[],deptName:"",cameraName:"",cameraCode:"",cameraDesc:"",cameraPositionStr:"",radius:"",angle:"",monitorStatus:"",remark:"",rtspLiveUrl:"",rtspHisUrl:"",createUserId:t.id,modifyUserId:t.id},cameraColumns:[{title:{CN:"名称",EN:"Name",TW:"名稱"}[a.language],key:"cameraName",fixed:"left",width:100},{title:{CN:"状态",EN:"State",TW:"狀態"}[a.language],key:"monitorStatus",width:100},{title:{CN:"公司",EN:"Company",TW:"公司"}[a.language],key:"companyName",width:150},{title:{CN:"编码",EN:"Code",TW:"編碼"}[a.language],key:"cameraCode",width:150},{title:{CN:"描述",EN:"Describe",TW:"描述"}[a.language],key:"cameraDesc",width:150},{title:{CN:"Rtsp直播地址",EN:"Live URL",TW:"Rtsp直播地址"}[a.language],key:"rtspLiveUrl",width:150},{title:{CN:"Rtsp录播地址",EN:"Delayed URL",TW:"Rtsp錄播地址"}[a.language],key:"rtspHisUrl",width:150},{title:{CN:"视野角度",EN:"Angle",TW:"視野角度"}[a.language],key:"angle",width:100},{title:{CN:"半径",EN:"Radius",TW:"半徑"}[a.language],key:"radius",width:100},{title:{CN:"操作",EN:"Operation",TW:"操作"}[a.language],key:"operation",width:80,fixed:"right",render:function(e,i){var t="";return t=pageVue.functionInfo.isDefense?{CN:"删除",EN:"Delete",TW:"删除"}[a.language]:{CN:"查看",EN:"View",TW:"查看"}[a.language],e("div",[e("Button",{props:{type:"error",size:"small"},on:{click:function(){}}},t)])}}],camersDatas:[],cameraList:[],alarmColumns:[],alarmDatas:[],isSearchLoading:!1,vehicleUseStatusList:n.vehicleUseStatus,searchColumns:[{title:{CN:"车牌号",EN:"Plate No.",TW:"車牌號"}[a.language],key:"licenseNumber",fixed:"left",width:130},{title:{CN:"运动状态",EN:"Vehicle State",TW:"車輛狀態"}[a.language],key:"vehicleStatus",align:"center",width:100},{title:{CN:"车辆名称",EN:"Vehicle Name",TW:"車輛名稱"}[a.language],key:"vehicleName",width:130},{title:{CN:"车辆编号",EN:"Vehicle Number",TW:"車輛編號"}[a.language],key:"vehicleCode",width:130},{title:{CN:"操作",EN:"Operation",TW:"操作"}[a.language],key:"operation",width:r.isViewVideo?120:80,fixed:"right",render:function(e,i){var t=e("Button",{props:{size:"small"}},{CN:"详情",EN:"Detail",TW:"詳情"}[a.language]),n=null;return r.isViewVideo&&pageVue.vehiclePositionList[i.index].licenseNumber&&pageVue.vehiclePositionList[i.index].providerId<100&&(401!=pageVue.vehiclePositionList[i.index].vehicleStatus&&402!=pageVue.vehiclePositionList[i.index].vehicleStatus||(t=e("Button",{props:{type:"primary",size:"small"},on:{click:function(){pageVue.showLiveVideo(pageVue.vehiclePositionList[i.index],0)}}},"实时"),2!=pageVue.vehiclePositionList[i.index].providerId&&(n=e("Button",{props:{size:"small",type:"warning"},class:"backPlay",style:{marginLeft:"2px"},on:{click:function(){pageVue.showLiveVideo(pageVue.vehiclePositionList[i.index],1)}}},"回放")))),e("div",[t,n])}}],searchDatas:[]},watch:{layerControl:function(e){var a=this,i=(e.indexOf("seat"),e.indexOf("satellite"),e.indexOf("alarm"),-1!=e.indexOf("defens")),t=-1!=e.indexOf("camera"),n=-1!=e.indexOf("vehicle");e.indexOf("background");a.baiduMapInfo.layersInfo.isVehicle=n,a.baiduMapInfo.layersInfo.isCamera=t,a.baiduMapInfo.layersInfo.isDefense=i}},methods:{refresh:function(){var e=window.location.href.split("?");window.location.href=e[0]+"?v="+Date.parse(new Date)},autoFocus:function(){$("body").find(".detailInfoModal input").on("click",function(){$(this).focus()})},showModal:function(e){var a=this;for(var i in a.modal)a.modal[i]=!1;a.modal[e]=!0},resetView:function(){var e=this;e.baiduMapInfo.map.centerAndZoom(new BMap.Point(e.airPort[0],e.airPort[1]),16)},getCompanyList:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.companyService+"?action="+CONFIG.ACTION.getCompanyList,actionUrl:CONFIG.SERVICE.companyService,dataObj:{id:0,pageSize:1e4},successCallback:function(a){200==a.code&&(e.companyList=a.data)}})},getSuper:function(e,a,i){for(var t=this,n=0,o=e.length;n<o;n++)if(e[n].value==a){if(i.push(a),0==e[n].paraDeptId)return;t.getSuper(t.departmentList,e[n].paraDeptId,i)}else t.getSuper(e[n].children,a,i)},formatSuperiorDeprt:function(e){var a=this,i=JSON.stringify(e).replace(/id/g,"value").replace(/deptName/g,"label").replace(/subDeptList/g,"children");a.departmentList=JSON.parse(i)},getDepartmentList:function(e){var a=this;a.departmentList=[],utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.deptService+"?action="+CONFIG.ACTION.getDeptTreeList,actionUrl:CONFIG.SERVICE.deptService,dataObj:{id:0,pageSize:1e4,companyId:a[e].companyId||0},successCallback:function(i){if(200==i.code){var t=[];a[e].deptIds=[],a.formatSuperiorDeprt(i.data),a.getSuper(a.departmentList,a[e].deptId,t),a[e].deptIds=t.reverse()}}})},openInfoWindowClose:function(){var e=this;e.baiduMapInfo.openInfoWindow.show=!1,e.baiduMapInfo.openInfoWindow.type="",e.isTrackItem=!1,e.openInfoWidth=0,e.openInfoHeight=0,e.drawAlVehicleByBaidu()},setLayerTypeNormal:function(e){var a=this;a.baiduMapInfo.mapType="BMAP_NORMAL_MAP"},setLayerTypeHybrid:function(e){var a=this;a.baiduMapInfo.mapType="BMAP_HYBRID_MAP"},baiduMapHandle:function(e){var a=this;a.baiduMapInfo.center.lng=a.airPort[0],a.baiduMapInfo.center.lat=a.airPort[1],a.baiduMapInfo.zoom=16,a.baiduMapInfo.map=e.map,BMap=e.BMap,a.getAllVehiclePositonList(),a.getCompanyList(),a.functionInfo.isCamera&&a.getCameraList(!0),a.functionInfo.isDefense&&a.getDefensAreaList(!0),a.getAllVehicleInterval(),a.baiduMapInfo.overviewMapControl=new BMap.OverviewMapControl({isOpen:!0,size:new BMap.Size(300,200)}),a.baiduMapInfo.map.addControl(a.baiduMapInfo.overviewMapControl),$(".radar")[0]&&new Radar($(".radar")[0]).init({scanSpeed:2})},baiduMapClick:function(e){var a=this;if(null==e.overlay)if(1==a.isAddCameraAction){if(0==a.baiduMapInfo.layersInfo.isCamera)return a.$Message.destroy(),void a.$Message.error("请在图层控制开启摄像机层");a.cameraDetailInfo={id:"",companyId:"",companyName:"",deptId:"",deptIds:[],deptName:"",cameraName:"",cameraCode:"",cameraDesc:"",cameraPosition:JSON.stringify({coordinates:[e.point.lng,e.point.lat]}),cameraPositionStr:e.point.lng+","+e.point.lat,radius:"",angle:"",monitorStatus:"",remark:"",rtspLiveUrl:"",rtspHisUrl:"",index:a.baiduMapInfo.cameraMarkers.length,createUserId:t.id,modifyUserId:t.id},a.createCameraFeature(a.cameraDetailInfo,function(i,t){a.baiduMapInfo.map.panTo(new BMap.Point(e.point.lng,e.point.lat)),a.baiduMapInfo.openInfoWindow.position={lng:e.point.lng,lat:e.point.lat},a.openInfoWidth=450,a.openInfoHeight=290,a.baiduMapInfo.openInfoWindow.type="isCameraPop",a.baiduMapInfo.openInfoWindow.show=!0,a.isAddCameraAction=!1})}else if(1==a.isAddDefensAction){if(0==a.baiduMapInfo.layersInfo.isDefense)return a.$Message.destroy(),void a.$Message.error("请在图层控制开启防区层");a.baiduMapInfo.defensPath.push({lng:e.point.lng,lat:e.point.lat}),a.baiduMapInfo.defensPath.length>=3?a.baiduMapInfo.isCloseDefensPath=!0:a.baiduMapInfo.isCloseDefensPath=!1,a.defensAreaDetailInfo={id:"",opType:1,companyId:"",fill:"#ffffff",stroke:"blue",deptId:"",deptIds:[],areaName:"",areaCode:"",secureStatus:"",areaRangeStr:"",speedLimit:"",staySecond:"",canEnter:"",canExit:"",canStay:"",remark:"",createUserId:t.id,modifyUserId:t.id};var i=[],n=a.baiduMapInfo.defensPath;if(n.length>0){for(var o=0,r=n.length;o<r;o++)i.push(n[o].lng+","+n[o].lat);i.push(i[0]),a.defensAreaDetailInfo.areaRangeStr=i.join(";")}}},resetClickSearch:function(){$("#ol-dbClickSearch").css({opacity:0,left:"-300px",top:"auto",bottom:"120px"})},dbClickBaiduMap:function(e){var a=this,i=e.pixel,t=e.point;a.isTrackItem=!1,$("#ol-dbClickSearch").css({opacity:1,left:i.x-280,top:i.y-230,bottom:"auto"}),setTimeout(function(){a.convertorByBaiduToGPS([t.lng,t.lat],function(e,i){a.baiduMapInfo.vehicleMarkers={},a.vehiclePositonPageInfo.centerPosition=e+","+i,a.getAllVehiclePositonList()})},2e3)},cancelAreaSearch:function(){var e=this;e.vehiclePositonPageInfo.centerPosition="",e.vehiclePositonPageInfo.span=1e3,e.getAllVehiclePositonList()},endDefensEdite:function(){var e=this;1==e.isAddDefensAction&&e.deleteDefensAction()},convertorByBaidu:function(e,a){var i=gcoord.transform([parseFloat(e[0]),parseFloat(e[1])],gcoord.WGS84,gcoord.BD09),t=new BMap.Point(i[0],i[1]);a&&a(t,i[0],i[1])},convertorByBaiduToGPS:function(e,a){var i=gcoord.transform([parseFloat(e[0]),parseFloat(e[1])],gcoord.BD09,gcoord.WGS84);a&&a(i[0],i[1])},setAnimationByBaidu:function(e){var a=this;a.convertorByBaidu(e,function(e){a.baiduMapInfo.map.panTo(e)})},setDefensRowData:function(e,a){var i=this,t=[];i.defensAreaDetailInfo=i.defensList[a],i.defensAreaDetailInfo.remark=decodeURI(i.defensList[a].remark),i.defensAreaDetailInfo.opType=2,i.defensAreaDetailInfo.areaRange?(t=JSON.parse(i.defensAreaDetailInfo.areaRange).coordinates[0],i.getDepartmentList("defensAreaDetailInfo"),i.openInfoWidth=550,i.openInfoHeight=290,i.baiduMapInfo.openInfoWindow.position={lng:t[0][0],lat:t[0][1]},i.baiduMapInfo.openInfoWindow.type="isDefenPop",i.baiduMapInfo.openInfoWindow.show=!0,i.baiduMapInfo.map.panTo(new BMap.Point(t[0][0],t[0][1]))):i.$Message.error("没有防区定位数据")},showDefensPop:function(e,a){var i=this,t=a.point;i.defensAreaDetailInfo=e,i.getDepartmentList("defensAreaDetailInfo"),i.openInfoWidth=550,i.openInfoHeight=290,i.baiduMapInfo.openInfoWindow.position={lng:t.lng,lat:t.lat},i.baiduMapInfo.openInfoWindow.type="isDefenPop",i.baiduMapInfo.openInfoWindow.show=!0,i.baiduMapInfo.map.panTo(new BMap.Point(t.lng,t.lat))},defensStatuChange:function(e,a){var i=this;e.id?(i.baiduMapInfo.defensList["_"+e.id].fill=i.defensColor["_"+a].fill,i.baiduMapInfo.defensList["_"+e.id].stroke=i.defensColor["_"+a].stroke):(i.defensAreaDetailInfo.fill=i.defensColor["_"+a].fill,i.defensAreaDetailInfo.stroke=i.defensColor["_"+a].stroke)},drawAllDefens:function(){var e=this;e.baiduMapInfo.defensList={};for(var a=0,i=e.defensList.length;a<i;a++)if(e.defensList[a].areaRange){var t=JSON.parse(e.defensList[a].areaRange).coordinates[0];e.baiduMapInfo.defensList["_"+e.defensList[a].id]={id:"_"+e.defensList[a].id,canEdit:!!e.functionInfo.isDefense,style:e.functionInfo.isDefense?"dashed":"solid",fill:e.defensColor["_"+e.defensList[a].secureStatus].fill,stroke:e.defensColor["_"+e.defensList[a].secureStatus].stroke,paths:function(){for(var e=[],a=0,i=t.length;a<i;a++)e.push({lng:t[a][0],lat:t[a][1]});return e}(),item:e.defensList[a]}}},updateDefensPath:function(e,a){var i=this,t=[],n=a.target.getPath();if(i.defensAreaDetailInfo=e,i.defensAreaDetailInfo.remark=decodeURI(e.remark),i.getDepartmentList("defensAreaDetailInfo"),n.length>0){for(var o=0,r=n.length;o<r;o++)t.push(n[o].lng+","+n[o].lat);t.push(t[0]),i.defensAreaDetailInfo.areaRangeStr=t.join(";"),e.id&&(i.defensAreaDetailInfo.opType=3,setTimeout(function(){i.uploadDefensAreaDetailInfoToServer()},500))}},formatDefensData:function(){for(var e=this,a=0,i=e.defensList.length;a<i;a++)e.defensDatas.push({areaName:decodeURI(e.defensList[a].areaName),areaCode:decodeURI(e.defensList[a].areaCode),secureStatus:function(){for(var i="",t=0,n=e.secureAreaStatusList.length;t<n;t++)if(e.secureAreaStatusList[t].type==e.defensList[a].secureStatus){i=e.secureAreaStatusList[t].name;break}return i}(),speedLimit:e.defensList[a].speedLimit,staySecond:e.defensList[a].staySecond})},getDefensAreaList:function(e){var a=this;1==e&&(a.defensDatas=[],a.defensList=[],a.defensPageInfo.pageNum=1),setTimeout(function(){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.areaService+"?action="+CONFIG.ACTION.getSecureAreaList,actionUrl:CONFIG.SERVICE.areaService,dataObj:a.defensPageInfo,successCallback:function(e){200==e.code&&(a.defensList=e.data,a.defensPageInfo.count=e.count,a.formatDefensData(),a.drawAllDefens())}})},500)},defensPageSizeChange:function(){var e=this;e.defensPageInfo.pageNum=parseInt(value,10),setTimeout(function(){e.getDefensAreaList(!1)},200)},addDefensAction:function(){var e=this;e.isAddDefensAction=!0,e.baiduMapInfo.defensPath=[]},deleteDefensAction:function(){var e=this;e.isAddDefensAction=!1,e.showDefensPop(e.defensAreaDetailInfo,{point:e.baiduMapInfo.defensPath[0]})},deleteDefensArea:function(){var e=this;e.baiduMapInfo.openInfoWindow.type="",e.baiduMapInfo.openInfoWindow.show=!1,e.defensAreaDetailInfo.id?0==e.addLoading&&utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.areaService+"?action="+CONFIG.ACTION.delSecureArea,actionUrl:CONFIG.SERVICE.areaService,dataObj:{ids:e.defensAreaDetailInfo.id,modifyUserId:t.id},beforeSendCallback:function(){e.addLoading=!0},completeCallback:function(){e.addLoading=!1},successCallback:function(a){200==a.code?(e.getDefensAreaList(!0),e.deleteLoading=!1,e.isDeleteDefens=!1,e.defensAreaDetailInfo={id:"",opType:1,companyId:"",fill:"#ffffff",stroke:"blue",deptId:"",deptIds:[],areaName:"",areaCode:"",secureStatus:"",areaRangeStr:"",speedLimit:"",staySecond:"",canEnter:"",canExit:"",canStay:"",remark:"",createUserId:t.id,modifyUserId:t.id}):e.$Message.error(a.message)}}):e.baiduMapInfo.defensPath=[]},uploadDefensAreaDetailInfoToServer:function(){var e=this;0==e.addLoading&&utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.areaService+"?action="+CONFIG.ACTION.saveSecureArea,actionUrl:CONFIG.SERVICE.areaService,dataObj:{id:e.defensAreaDetailInfo.id,opType:e.defensAreaDetailInfo.opType,companyId:e.defensAreaDetailInfo.companyId,deptId:e.defensAreaDetailInfo.deptIds[e.defensAreaDetailInfo.deptIds.length-1]||0,areaName:encodeURI(e.defensAreaDetailInfo.areaName),areaCode:encodeURI(e.defensAreaDetailInfo.areaCode),secureStatus:e.defensAreaDetailInfo.secureStatus,areaRangeStr:e.defensAreaDetailInfo.areaRangeStr,speedLimit:e.defensAreaDetailInfo.speedLimit,staySecond:e.defensAreaDetailInfo.staySecond,canEnter:e.defensAreaDetailInfo.canEnter||720,canExit:e.defensAreaDetailInfo.canExit||720,canStay:e.defensAreaDetailInfo.canStay||720,remark:encodeURI(e.defensAreaDetailInfo.remark),createUserId:e.defensAreaDetailInfo.createUserId,modifyUserId:e.defensAreaDetailInfo.modifyUserId},beforeSendCallback:function(){e.addLoading=!0},completeCallback:function(){e.addLoading=!1},successCallback:function(a){200==a.code?(e.getDefensAreaList(!0),e.baiduMapInfo.defensPath=[]):e.$Message.error(a.message)}})},formatCameraData:function(){for(var e=this,a=0,i=e.cameraList.length;a<i;a++)e.camersDatas.push({id:e.cameraList[a].id,companyId:e.cameraList[a].companyId,companyName:decodeURI(e.cameraList[a].companyName),deptId:e.cameraList[a].deptId,deptName:decodeURI(e.cameraList[a].deptName),cameraName:decodeURI(e.cameraList[a].cameraName),cameraCode:decodeURI(e.cameraList[a].cameraCode),cameraDesc:decodeURI(e.cameraList[a].cameraDesc),radius:e.cameraList[a].radius,cameraPositionStr:e.cameraList[a].cameraPositionStr,angle:e.cameraList[a].angle,monitorStatus:e.cameraList[a].monitorStatusName,remark:decodeURI(e.cameraList[a].remark),rtspLiveUrl:e.cameraList[a].rtspLiveUrl,rtspHisUrl:e.cameraList[a].rtspHisUrl})},getCameraList:function(e){var a=this;a.camersDatas=[],a.cameraList=[],1==e&&(a.cameraPageInfo.pageNum=1),setTimeout(function(){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.deviceService+"?action="+CONFIG.ACTION.getCameraList,actionUrl:CONFIG.SERVICE.deviceService,dataObj:a.cameraPageInfo,successCallback:function(e){200==e.code&&(a.cameraList=e.data,a.cameraPageInfo.count=e.count,a.formatCameraData(),a.drawAllCamera())}})},500)},createCameraFeature:function(e,a){var i=this,t=JSON.parse(e.cameraPosition).coordinates;i.baiduMapInfo.cameraMarkers.push({icon:{url:CONFIG.HOST+"/airport/assets/img/camera.png?v="+Date.parse(new Date),size:{width:50,height:50}},position:{lng:t[0],lat:t[1]},item:e}),a&&a(e.id,t)},dragendCamera:function(e,a){var i=this,t=a.point;i.cameraDetailInfo=i.baiduMapInfo.cameraMarkers[e].item,i.cameraDetailInfo.cameraPosition=JSON.stringify({coordinates:[t.lng,t.lat]}),i.cameraDetailInfo.cameraPositionStr=t.lng+","+t.lat,i.baiduMapInfo.cameraMarkers[e].position={lng:t.lng,lat:t.lat},i.baiduMapInfo.openInfoWindow.position={lng:t.lng,lat:t.lat},i.cameraDetailInfo.id&&i.uploadCameraDetailInfoToServer()},drawAllCamera:function(){var e=this;e.baiduMapInfo.cameraMarkers=[];for(var a=0,i=e.cameraList.length;a<i;a++)e.createCameraFeature(e.cameraList[a])},setCameraRowData:function(e,a){var i=this,t=[];i.cameraDetailInfo=i.cameraList[a],i.cameraDetailInfo.remark=decodeURI(i.cameraList[a].remark),i.cameraDetailInfo.cameraName=decodeURI(i.cameraList[a].cameraName),i.cameraDetailInfo.cameraCode=decodeURI(i.cameraList[a].cameraCode),i.cameraDetailInfo.cameraDesc=decodeURI(i.cameraList[a].cameraDesc),t=JSON.parse(i.cameraDetailInfo.cameraPosition).coordinates,i.getDepartmentList("cameraDetailInfo"),i.openInfoWidth=450,i.openInfoHeight=290,i.baiduMapInfo.openInfoWindow.position={lng:t[0],lat:t[1]},i.baiduMapInfo.map.panTo(new BMap.Point(t[0],t[1])),i.baiduMapInfo.openInfoWindow.type="isCameraPop",i.baiduMapInfo.openInfoWindow.show=!0},cameraOpenPop:function(e,a){var i=this;i.baiduMapInfo.openInfoWindow.type="",i.baiduMapInfo.openInfoWindow.show=!1,i.getDepartmentList("cameraDetailInfo"),i.openInfoWidth=450,i.openInfoHeight=290,setTimeout(function(){i.baiduMapInfo.openInfoWindow.show=!0,i.baiduMapInfo.openInfoWindow.position=e.position,i.baiduMapInfo.openInfoWindow.type="isCameraPop",i.cameraDetailInfo=e.item,i.baiduMapInfo.map.panTo(new BMap.Point(e.position.lng,e.position.lat))},250)},cameraPageSizeChange:function(){var e=this;e.cameraPageInfo.pageNum=parseInt(value,10),setTimeout(function(){e.getCameraList(!1)},200)},deleteCamera:function(e){var a=this;a.baiduMapInfo.openInfoWindow.type="",a.baiduMapInfo.openInfoWindow.show=!1,a.cameraDetailInfo.id?utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.deviceService+"?action="+CONFIG.ACTION.delCamera,actionUrl:CONFIG.SERVICE.deviceService,dataObj:{ids:a.cameraDetailInfo.id,modifyUserId:t.id},successCallback:function(e){200==e.code?(a.getCameraList(!0),setTimeout(function(){a.deleteLoading=!1,a.isDeleteCamera=!1,a.cameraDetailInfo={id:"",companyId:"",companyName:"",deptId:"",deptIds:[],deptName:"",cameraName:"",cameraCode:"",cameraDesc:"",cameraPositionStr:"",radius:"",angle:"",monitorStatus:"",remark:"",rtspLiveUrl:"",rtspHisUrl:"",createUserId:t.id,modifyUserId:t.id}},500)):a.$Message.error(e.message)}}):a.baiduMapInfo.cameraMarkers.splice(a.cameraDetailInfo.index,1)},uploadCameraDetailInfoToServer:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.deviceService+"?action="+CONFIG.ACTION.saveCamera,actionUrl:CONFIG.SERVICE.deviceService,dataObj:{id:e.cameraDetailInfo.id,companyId:e.cameraDetailInfo.companyId,deptId:e.cameraDetailInfo.deptIds[e.cameraDetailInfo.deptIds.length-1]||0,cameraName:encodeURI(e.cameraDetailInfo.cameraName),cameraCode:encodeURI(e.cameraDetailInfo.cameraCode),cameraDesc:encodeURI(e.cameraDetailInfo.cameraDesc),radius:e.cameraDetailInfo.radius,angle:e.cameraDetailInfo.angle,cameraPositionStr:e.cameraDetailInfo.cameraPositionStr,monitorStatus:e.cameraDetailInfo.monitorStatus,remark:encodeURI(e.cameraDetailInfo.remark),rtspLiveUrl:e.cameraDetailInfo.rtspLiveUrl,rtspHisUrl:e.cameraDetailInfo.rtspHisUrl,createUserId:t.id,modifyUserId:t.id},successCallback:function(a){200==a.code?(e.getCameraList(!0),setTimeout(function(){e.baiduMapInfo.openInfoWindow.type="",e.baiduMapInfo.openInfoWindow.show=!1,e.addLoading=!1},500)):e.$Message.error(a.message)}})},getAllVehiclePositonList:function(){var e=this;utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.vehicleService+"?action="+CONFIG.ACTION.getAllVehiclePositonList,actionUrl:CONFIG.SERVICE.vehicleService,dataObj:{span:e.vehiclePositonPageInfo.span||1e3,deptId:e.vehiclePositonPageInfo.deptId,pageNum:e.vehiclePositonPageInfo.pageNum,pageSize:e.vehiclePositonPageInfo.pageSize,id:e.vehiclePositonPageInfo.id,companyId:e.vehiclePositonPageInfo.companyId,gpsDeviceCode:e.vehiclePositonPageInfo.gpsDeviceCode,vehicleTypeId:e.vehiclePositonPageInfo.vehicleTypeId,vehicleStatus:e.vehiclePositonPageInfo.vehicleStatus,useStatus:e.vehiclePositonPageInfo.useStatus,vehicleColorId:e.vehiclePositonPageInfo.vehicleColorId,vehicleBrandId:e.vehiclePositonPageInfo.vehicleBrandId,centerPosition:e.vehiclePositonPageInfo.centerPosition,vehicleName:encodeURI(e.vehiclePositonPageInfo.vehicleName),vehicleCode:encodeURI(e.vehiclePositonPageInfo.vehicleCode),licenseNumber:encodeURI(e.vehiclePositonPageInfo.licenseNumber)},beforeSendCallback:function(){e.isSearchLoading=!0},completeCallback:function(){e.isSearchLoading=!1},successCallback:function(a){200==a.code&&(e.searchDatas=[],e.vehiclePositionList=a.data,e.vehiclePositonPageInfo.count=a.count,e.formatVehiclePositon(),e.resetClickSearch(),e.drawAlVehicleByBaidu())}})},formatVehiclePositon:function(){for(var e,a=this,i=0,t=a.vehiclePositionList.length;i<t;i++)a.searchDatas.push({o:a.vehiclePositionList[i].o,id:a.vehiclePositionList[i].id,speed:a.vehiclePositionList[i].speed,power:a.vehiclePositionList[i].power,deptId:a.vehiclePositionList[i].deptId,deptName:a.vehiclePositionList[i].deptName,modifyTime:a.vehiclePositionList[i].modifyTime,gpsDeviceId:a.vehiclePositionList[i].gpsDeviceId,companyName:a.vehiclePositionList[i].companyName,vehicleName:a.vehiclePositionList[i].vehicleName,vehicleCode:a.vehiclePositionList[i].vehicleCode,licenseNumber:a.vehiclePositionList[i].licenseNumber,lastPosition:a.vehiclePositionList[i].lastPosition?JSON.parse(a.vehiclePositionList[i].lastPosition).coordinates:null,vehicleTypeId:a.vehiclePositionList[i].vehicleTypeName,gpsDeviceCode:a.vehiclePositionList[i].gpsDeviceCode,providerId:a.vehiclePositionList[i].providerId,vehicleStatus:(e=void 0,e=$.grep(a.terminalStatusList,function(e){return e.type==a.vehiclePositionList[i].vehicleStatus}),e&&0!=e.length?e[0].name:"--"),useStatus:a.vehiclePositionList[i].useStatusName,vehicleColorId:a.vehiclePositionList[i].vehicleColorName,vehicleBrandId:a.vehiclePositionList[i].vehicleBrandName,vehicleStatusName:a.vehiclePositionList[i].vehicleStatusName,cellClassName:{vehicleStatus:"_"+a.vehiclePositionList[i].vehicleStatus}})},searchTimeVehicle:function(){var e=this;e.getAllVehiclePositonList()},getBeginDate:function(e){var a=this;a.dateTimeInfo.beginDate=e},getEndDate:function(e){var a=this;a.dateTimeInfo.endDate=e},getBeginTime:function(e){var a=this;a.dateTimeInfo.beginTime=e},getEndTime:function(e){var a=this;a.dateTimeInfo.endTime=e},getAdressDetail:function(e,a,i){a.gc=new BMap.Geocoder,a.sourceCoor=e,a.point=new BMap.Point(a.sourceCoor[0],a.sourceCoor[1]),a.gc.getLocation(a.point,function(e){e.surroundingPois.length>0?a.address=e.surroundingPois[0].address+"("+e.surroundingPois[0].title+")":a.address=e.address,i&&i()})},formatTrajectoryInfo:function(){var e,a=this,i=null,t=[];if(a.singleVehicleItem&&a.singleVehicleItem.track){i=a.singleVehicleItem.track.split("/");for(var n=0,o=i.length;n<o;n++){var r=i[n].split(",");t.push({time:(e=void 0,e=utility.getDateDetailInfo(r[2]),e.year+"-"+e.month+"-"+e.date+" "+e.hour+":"+e.min+":"+e.second),speed:r[3],coordinate:[parseFloat(r[0],10),parseFloat(r[1],10)],vehicleCode:a.singleVehicleItem.vehicleCode,vehicleStatus:a.singleVehicleItem.vehicleStatus,companyName:a.singleVehicleItem.companyName,deptName:a.singleVehicleItem.deptName,vehicleName:a.singleVehicleItem.vehicleName,licenseNumber:a.singleVehicleItem.licenseNumber,lastGpsTime:a.singleVehicleItem.lastGpsTime,vehicleTypeName:a.singleVehicleItem.vehicleTypeName}),a.convertorByBaidu([r[0],r[1]],function(e,i,t){a.baiduMapInfo.animationInfo.coordinates.push({lng:i,lat:t})})}}a.baiduMapInfo.animationInfo.curveInfo=a.baiduMapInfo.animationInfo.coordinates,a.baiduMapInfo.animationInfo.pointInfo=a.baiduMapInfo.animationInfo.coordinates,a.baiduMapInfo.animationInfo.trajectoryInfo=t},showLiveVideo:function(e,a){var i="http://43.247.68.26:8080/airport/www/module/liveVideo/liveVideo.html?vehicleInfo="+encodeURI(JSON.stringify(e))+"&isBackPlay="+a;a&&(i="http://43.247.68.26:8080/airport/www/module/playBack/liveVideo.html?vehicleInfo="+encodeURI(JSON.stringify(e))+"&isBackPlay="+a),2==e.providerId&&(i=a?"http://43.247.68.26:8080/airport/www/module/playBack/liveVideo.html?vehicleInfo="+encodeURI(JSON.stringify(e))+"&isBackPlay="+a:"http://43.247.68.26:8080/airport/www/module/liveVideoTest1/liveVideo.html?vehicleInfo="+encodeURI(JSON.stringify(e))+"&id="+t.id+"&userToken="+t.userToken+"&isBackPlay="+a),window.open(i,"liveVideo","toolbar=yes, location=0, directories=no, status=0, menubar=0, scrollbars=1, resizable=1, copyhistory=1, width="+window.outerWidth+", height="+(window.outerHeight-50))},createVehicleByBaidu:function(e,a){var i=this,t=JSON.parse(e.lastPosition).coordinates,o=CONFIG.HOST+"/airport/assets/car/success.gif",r=function(){for(var e={},a=0,i=n.vehicleType.length;a<i;a++)e[n.vehicleType[a].name]=n.vehicleType[a].type+"";return e}(),s=r[e.vehicleTypeName]+e.vehicleStatus||e.vehicleStatus;o=CONFIG.HOST+"/airport/assets/car/"+s+".gif?v="+Date.parse(new Date),i.convertorByBaidu(t,function(t,n,r){i.baiduMapInfo.vehicleMarkers["_"+e.id]?i.baiduMapInfo.vehicleMarkers["_"+e.id].position.lng-n==0&&i.baiduMapInfo.vehicleMarkers["_"+e.id].position.lat-r==0||(i.baiduMapInfo.vehicleMarkers["_"+e.id].item=e,i.baiduMapInfo.vehicleMarkers["_"+e.id].zIndex=i.baiduMapInfo.vehicleMarkers["_"+e.id].zIndex||0,i.baiduMapInfo.vehicleMarkers["_"+e.id].position={lng:n,lat:r}):i.baiduMapInfo.vehicleMarkers["_"+e.id]={id:"_"+e.id,icon:{url:o,size:{width:28,height:35}},position:{lng:n,lat:r},zIndex:0,top:!1,animation:"",item:e},a&&a(n,r)})},setVehicleTop:function(e,a){var i=this;i.baiduMapInfo.vehicleMarkers[e.id]&&(i.baiduMapInfo.vehicleMarkers[e.id].zIndex=1e10,i.baiduMapInfo.vehicleMarkers[e.id].top=!0,i.baiduMapInfo.vehicleMarkers[e.id].animation=""),i.openInfoWidth=360,i.openInfoHeight=0},cancelVehicleTop:function(e,a){var i=this;i.baiduMapInfo.vehicleMarkers[e.id]&&(i.baiduMapInfo.vehicleMarkers[e.id].zIndex=0,i.baiduMapInfo.vehicleMarkers[e.id].top=!1,i.baiduMapInfo.vehicleMarkers[e.id].animation="")},vehicleOpenPop:function(e,a){var i=this;i.baiduMapInfo.openInfoWindow.show=!1,i.baiduMapInfo.openInfoWindow.type="",i.isTrackItem=!0,i.openInfoWidth=360,i.openInfoHeight=0,setTimeout(function(){i.vehicleItemPop=e.item,i.singleVehiclePageInfo.licenseNumber=i.vehicleItemPop.licenseNumber,i.trackItem.licenseNumber=i.vehicleItemPop.licenseNumber,i.getAdressDetail([e.position.lng,e.position.lat],i.vehicleItemPop,function(){i.baiduMapInfo.openInfoWindow.show=!0,
i.baiduMapInfo.openInfoWindow.type="isVehiclePopInfo",i.baiduMapInfo.openInfoWindow.position=e.position,i.baiduMapInfo.map.panTo(new BMap.Point(e.position.lng,e.position.lat)),i.drawAlVehicleByBaidu()})},250)},drawAlVehicleByBaidu:function(){var e=this;if(e.isTrackItem){e.baiduMapInfo.vehicleMarkers={};for(var a=0,i=e.vehiclePositionList.length;a<i;a++)if(e.trackItem.licenseNumber==e.vehiclePositionList[a].licenseNumber){e.createVehicleByBaidu(e.vehiclePositionList[a],function(a,i){"isVehiclePopInfo"==e.baiduMapInfo.openInfoWindow.type&&(e.baiduMapInfo.openInfoWindow.position={lng:a,lat:i})});break}}else for(var t=0,n=e.vehiclePositionList.length;t<n;t++)e.createVehicleByBaidu(e.vehiclePositionList[t])},showPositionByBaidu:function(e,a){var i=this,t=[],n="";i.vehiclePositionItem=i.vehiclePositionList[a],i.vehicleItemPop=i.vehiclePositionItem,i.singleVehiclePageInfo.licenseNumber=i.vehicleItemPop.licenseNumber,n=i.vehicleItemPop.lastPosition,n?(t=JSON.parse(n).coordinates,0==t[0]||0==t[1]?i.$Message.error("没有车辆定位数据"):(i.setAnimationByBaidu(t),i.openInfoWidth=0,i.openInfoHeight=0,setTimeout(function(){i.convertorByBaidu(t,function(e,a,t){i.getAdressDetail([a,t],i.vehicleItemPop,function(){i.baiduMapInfo.openInfoWindow.position={lng:a,lat:t},i.baiduMapInfo.openInfoWindow.type="isVehiclePopInfo",i.baiduMapInfo.openInfoWindow.show=!0,i.isTrackItem=!0,i.trackItem.licenseNumber=i.singleVehiclePageInfo.licenseNumber,i.drawAlVehicleByBaidu()})})},1e3))):i.$Message.error("没有车辆定位数据")},clearTrackByBaidu:function(){var e=this;e.baiduMapInfo.animationInfo.curveInfo=[],e.baiduMapInfo.animationInfo.pointInfo=[],e.baiduMapInfo.animationInfo.moveVehicle=null,clearInterval(e.baiduMapInfo.animationInfo.timeInterval)},showTrackPointInfo:function(e){for(var a=this,i=0,t=0,n=a.baiduMapInfo.animationInfo.coordinates.length;t<n;t++)if(e.point.lng==a.baiduMapInfo.animationInfo.coordinates[t].lng&&e.point.lng==a.baiduMapInfo.animationInfo.coordinates[t].lat){i=t;break}a.baiduMapInfo.animationInfo.trajectoryItem=a.baiduMapInfo.animationInfo.trajectoryInfo[i],a.getAdressDetail([e.point.lng,e.point.lat],a.baiduMapInfo.animationInfo.trajectoryItem,function(){a.baiduMapInfo.map.panTo(e.point),a.openInfoWidth=330,a.openInfoHeight=0,a.baiduMapInfo.openInfoWindow.position={lng:e.point.lng,lat:e.point.lat},a.baiduMapInfo.openInfoWindow.type="isTrajectPoint",a.baiduMapInfo.openInfoWindow.show=!0})},getSingleVehicleTrackByBaidu:function(){var e,a=this;0==a.dateTimeInfo.beginDate.length&&(a.dateTimeInfo.beginDate=(e=utility.getDateDetailInfo(),e.year+"-"+e.month+"-"+e.date)),0==a.dateTimeInfo.beginTime.length&&(a.dateTimeInfo.beginTime="00:00:00"),0==a.dateTimeInfo.endDate.length&&(a.dateTimeInfo.endDate=function(){var e=utility.getDateDetailInfo();return e.year+"-"+e.month+"-"+e.date}()),0==a.dateTimeInfo.endTime.length&&(a.dateTimeInfo.endTime="23:59:59"),a.singleVehiclePageInfo.beginTime=a.dateTimeInfo.beginDate+" "+a.dateTimeInfo.beginTime,a.singleVehiclePageInfo.endTime=a.dateTimeInfo.endDate+" "+a.dateTimeInfo.endTime,timeDiff=utility.timeDiff(a.singleVehiclePageInfo.beginTime,a.singleVehiclePageInfo.endTime),a.clearTrackByBaidu(),a.$Message.destroy(),0!=timeDiff.isOver?timeDiff.day>3?a.$Message.error("时间跨度不能超过3天"):(a.$Message.loading({content:"正在加载轨迹..."}),utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.vehicleService+"?action="+CONFIG.ACTION.getSingleVehicleTrack,actionUrl:CONFIG.SERVICE.vehicleService,dataObj:{gpsDeviceCode:a.singleVehiclePageInfo.gpsDeviceCode,licenseNumber:encodeURI(a.singleVehiclePageInfo.licenseNumber),beginTime:a.singleVehiclePageInfo.beginTime,endTime:a.singleVehiclePageInfo.endTime},successCallback:function(e){200==e.code?(a.singleVehicleItem=e.data,a.showModal("isHistory"),a.singleVehicleItem.track?a.formatTrajectoryInfo():(a.$Message.destroy(),a.$Message.error(a.singleVehiclePageInfo.beginTime+"  "+a.singleVehiclePageInfo.endTime+"查询不到轨迹数据"),setTimeout(function(){a.$Message.destroy()},3e3))):(a.$Message.destroy(),a.$Message.error(e.message),setTimeout(function(){a.$Message.destroy()},3e3))},errorCallback:function(){a.$Message.destroy()}})):a.$Message.error("开始时间大于结束时间")},playBackByBaidu:function(){var e=this,a=0,i=e.vehicleItemPop,t=e.baiduMapInfo.animationInfo.coordinates,o=function(){for(var e={},a=0,i=n.vehicleType.length;a<i;a++)e[n.vehicleType[a].name]=n.vehicleType[a].type+"";return e}(),r=o[i.vehicleTypeName]+i.vehicleStatus||i.vehicleStatus;e.baiduMapInfo.animationInfo.moveVehicle={icon:{url:CONFIG.HOST+"/airport/assets/car/"+r+".gif?v="+Date.parse(new Date),size:{width:28,height:35}},position:{lng:t[a].lng,lat:t[a].lat},zIndex:1e5,top:!0},e.baiduMapInfo.openInfoWindow.show=!1,e.baiduMapInfo.map.panTo(new BMap.Point(t[a].lng,t[a].lat)),e.baiduMapInfo.animationInfo.timeInterval=setInterval(function(){a<t.length?(a++,e.baiduMapInfo.animationInfo.moveVehicle.position=t[a],e.baiduMapInfo.map.panTo(new BMap.Point(t[a].lng,t[a].lat))):(e.baiduMapInfo.animationInfo.moveVehicle=null,clearInterval(e.baiduMapInfo.animationInfo.timeInterval))},10*(55-e.baiduMapInfo.animationInfo.speed+55))},getAllVehicleInterval:function(){var e=this;e.timePosition=setInterval(function(){"isCameraPop"!=e.baiduMapInfo.openInfoWindow.type&&"isDefenPop"!=e.baiduMapInfo.openInfoWindow.type&&e.getAllVehiclePositonList()},1e4)}},created:function(){var e=this;utility.isLogin(!1),e.$Message.config({top:180,duration:3}),e.showModal("isLayer")},mouted:function(){}})})();