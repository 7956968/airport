(function(){var a=utility.getLocalStorage("language"),b=utility.getLocalStorage("userInfo"),c=utility.getLocalStorage("remember");console.log(c);new Vue({el:"#js-vue",data:{language:a?a.language:"CN",loading:!1,isShowTips:!1,message:"",loginInfo:{userCode:c&&c.remember.userCode?c.remember.userCode:"",userPwd:c&&c.remember.userPwd?c.remember.userPwd:"",remember:!0},languageList:[{value:"CN",label:"\u4E2D\u6587"}],airPort:"113.310746,23.396745",airPortList:[{value:"0",label:"\u5168\u90E8"},{value:"113.310746,23.396745",label:"\u5E7F\u5DDE\u767D\u4E91\u673A\u573A"},{value:"121.34210660807666,31.198845194982827",label:"\u4E0A\u6D77\u8679\u6865\u56FD\u9645\u673A\u573A"},{value:"121.804854898899,31.151142510137117",label:"\u4E0A\u6D77\u6D66\u4E1C\u56FD\u9645\u673A\u573A"}],title:{CN:"\u7279\u79CD\u8F66\u8F86\u97F3\u89C6\u9891\u53EF\u89C6\u5316\u7CFB\u7EDF",EN:"Mingui Non-Powered Euipment Management System",TW:"\u6C11\u8CB4\u7121\u52D5\u529B\u7BA1\u7406\u7CFB\u7D71"}},watch:{language:function(a){var b=this;document.title=b.title[a],utility.setLocalStorage("language",{language:a}),setTimeout(function(){b.getBizParam()},500)}},methods:{validateInput:function(){var a=this;return a.$Message.config({top:150,duration:3}),utility.checkLen(a.loginInfo.userCode,0)?(a.$Message.error({CN:"\u8BF7\u8F93\u5165\u7528\u6237\u540D",EN:"Please Enter userCode",TW:"\u8ACB\u8F38\u5165\u7528\u6236\u540D"}[a.language]),!1):!utility.checkLen(a.loginInfo.userPwd,0)||(a.$Message.error({CN:"\u8BF7\u8F93\u5165\u5BC6\u7801",EN:"Please Enter Password",TW:"\u8ACB\u8F38\u5165\u5BC6\u78BC"}[a.language]),!1)},formatFunMenu:function(a){for(var b=this,c={menu_map:[],menu_org:[],menu_device:[],menu_report:[],menu_system:[]},d=a.userFuncList,e=0,f=d.length;e<f;e++)(-1!=d[e].functionCode.indexOf("map_")||"device_manage_vehicle"==d[e].functionCode||"device_view_secure_area"==d[e].functionCode||"device_manage_secure_area"==d[e].functionCode||"device_manage_camera"==d[e].functionCode||"device_view_camera"==d[e].functionCode)&&c.menu_map.push(d[e]),-1!=d[e].functionCode.indexOf("org_manage_")&&c.menu_org.push(d[e]),-1!=d[e].functionCode.indexOf("device_manage_")&&c.menu_device.push(d[e]),-1!=d[e].functionCode.indexOf("report_")&&c.menu_report.push(d[e]),-1!=d[e].functionCode.indexOf("system_")&&c.menu_system.push(d[e]);utility.setLocalStorage("userFuncList",c)},loginAction:function(){var a=this;a.loading||a.validateInput()&&utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.userService+"?action="+CONFIG.ACTION.userLogin+"&userCode="+a.loginInfo.userCode+"&userPwd="+md5(a.loginInfo.userPwd).toUpperCase(),actionUrl:CONFIG.SERVICE.userService,beforeSendCallback:function(){a.loading=!0},completeCallback:function(){a.loading=!1},successCallback:function(b){200==b.code?(utility.setLocalStorage("userInfo",b.data),utility.setLocalStorage("language",{language:a.language}),utility.setLocalStorage("airPort",{airPort:a.airPort}),utility.setLocalStorage("remember",{remember:a.loginInfo}),utility.setLocalStorage("isPhone",{isPhone:!0}),a.formatFunMenu(b.data),setTimeout(function(){window.location.href="/airport/www/module/mapPhone/maps.html"},500)):a.$Message.error(b.message)}})},getBizParam:function(){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.commonService+"?action="+CONFIG.ACTION.getBizParam,actionUrl:CONFIG.SERVICE.commonService,successCallback:function(a){200==a.code&&utility.setLocalStorage("bizParam",a.data)}})},getProvinceList:function(){utility.interactWithServer({url:CONFIG.HOST+CONFIG.SERVICE.commonService+"?action="+CONFIG.ACTION.getProvinceList,actionUrl:CONFIG.SERVICE.commonService,successCallback:function(a){200==a.code&&utility.setLocalStorage("provinceList",a.data)}})}},created:function(){var a=this;utility.setLocalStorage("isPhone",{isPhone:!0}),document.title=a.title[a.language],a.getBizParam(),a.getProvinceList(),document.onkeydown=function(b){var b=b||event,c=b.keyCode||b.while||b.charCode;13==c&&a.loginAction()}}})})();